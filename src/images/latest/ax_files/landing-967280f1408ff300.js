(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[633],{1026:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/plus/landing",function(){return n(9223)}])},27534:function(e,t,n){"use strict";n.d(t,{M:function(){return u}});var i=n(11259),r=n(12978),a=n(95542),u=(0,n(1324).q)({url:"/digiplus/",transformer:function(e){var t,n,u,s,o,l=e.data||{},d=l.can_buy_subscription,c=l.cta_sentence,p=l.faq,f=l.plans,g=l.user,v=l.subscription;return{digiplusCanBuySubscription:!!d,digiplusPrimaryButtonText:c,digiplusFaqs:null==p?void 0:null===(t=p.map)||void 0===t?void 0:t.call(p,function(e){return(0,a.K)({data:e})}),digiplusPlans:null==f?void 0:null===(n=f.map)||void 0===n?void 0:n.call(f,function(e){return(0,r.G)({data:e})}),digiplusSubscription:(0,i.O)({data:v}),digiplusUser:{userFirstName:(s=(u=g||{}).first_name)||"",userLastName:(o=u.last_name)||"",userName:s?"".concat(s||""," ").concat(o||""):""}}},isPageGetRequest:!0})},9223:function(e,t,n){"use strict";n.r(t),n.d(t,{__getServerSideProps:function(){return C},default:function(){return R}});var i=n(40171),r=n(66383),a=n(52322),u=n(2784),s=n(25237),o=n.n(s),l=n(97729),d=n.n(l),c=n(30665),p=n(88413),f=n(26442),g=n(64177),v=n(80803),_=n(8830),m=n(42080),h=n(27314),S=n(87049),b=n(8155),P=n(6013),y=n(4818),D=n(41435),I=n(98661),E=n(27534),T=o()(function(){return n.e(2889).then(n.bind(n,12791)).then(function(e){return e.DigiplusSubscriptionModal})},{loadableGenerated:{webpack:function(){return[12791]}},ssr:!1}),R=(0,y.D)({component:function(e){var t=e.ssrData,n=e.pending,i=(0,v.d)(),s=i.isOpen,o=i.onOpen,l=i.onClose,y=(0,m.e)({isOpen:s}).zIndex,E=(0,_.R)({modalId:"plus-subscription-modal",shouldCloseOtherModals:!0}),R=E.isOpen,C=E.onOpen,N=E.onClose,k=(0,h.e)().redirect,A=(0,r.Z)((0,u.useState)(),2),q=A[0],M=A[1],F=(t||{}).digiplusPlans,O=(0,S.v)(P.p.isLoggedIn),x=(0,S.v)(P.p.digiplusData).digiplusIsActivated,w=(0,g.C)(),L=w.isDesktop,V=w.windowWidth;(0,u.useEffect)(function(){(0,D.x)(F)||M(null==F?void 0:F.find(function(e){return null==e?void 0:e.planIsSelected}))},[F]);var j=function(e){(0,b.d0)({clickedItemName:e,widgetName:p.Jy})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d(),{children:(0,a.jsx)("title",{children:(0,I.t)({title:"پلاس",suffix:"خدمات ویژه کاربران دیجی‌کالا"})})}),(0,a.jsx)(c.LandingPage,{data:t,isPlusUser:x,onOpenSubscriptionModal:function(e){j(e),C()},onGoToProfile:function(){k({url:f.iV})},onGoToKYC:function(){j("kyc button"),k({url:f.s8})},isDesktop:L,isPending:n,isLoggedIn:!!O,onSelectPlan:function(e){return function(){M(e)}},selectedPlan:q,isOpenFeatureModal:s,onOpenFeatureModal:o,onCloseFeatureModal:l,zIndexFeatureModal:y,windowWidth:V}),(0,a.jsx)(T,{defaultSelectedPlan:q,isOpenModal:R,onCloseModal:N,source:"landing"})]})},getAPIMethods:function(){return[{apiMethod:E.M}]},layoutProps:{chatKey:"digiplus",noContentPadding:!0,desktopFullWidth:!0},noDefaultLoader:!0}),C=(0,i.I)({getSSRMethods:R.getAPIMethods})},53430:function(e,t,n){"use strict";n.d(t,{Sm:function(){return i},VW:function(){return r},fr:function(){return a}});var i={ACTIVE:"ACTIVE",PENDING:"PENDING",INACTIVE:"INACTIVE"},r={ACTIVE:"ACTIVE",ENDED:"ENDED",RESERVED:"RESERVED"},a={PREVIOUS:"previous",CURRENT:"current"}},12978:function(e,t,n){"use strict";function i(e){var t,n,i,r=e.data||{},a=r.id,u=r.title,s=r.subtitle,o=r.description,l=r.number_of_days,d=r.price,c=r.status,p=r.discount,f=r.discount_percent,g=r.new_user_discount,v=r.new_user_discount_percent,_=r.price_per_month,m=r.partner,h=r.cro_id,S=r.icon,b=r.total_payable_price,P=r.active_direct_debit,y=r.direct_debit_discount_description,D=r.free_shipment_count,I=r.fresh_free_shipment_count,E=r.jet_free_shipment_count,T=r.message,R=r.selected,C=r.recommended,N=r.plan_type,k=r.badge,A=r.perks,q=r.direct_debit;return{planId:a,planCROId:h,planTitle:u,planSubTitle:s,planDescription:o,planBadge:{badgeTitle:(t=k||{}).title,badgeIcon:t.icon},planNumberOfDays:l,planPrice:d,planStatus:c,planDiscount:p,planDiscountPercent:f,planNewUserDiscount:g,planNewUserDiscountPercent:v,planPartner:m,planIcon:S,planTotalPayablePrice:b,planActiveDirectDebit:P,planDirectDebitDiscountDescription:y,planPricePerMonth:_,planFreeShipmentCount:D,planFreshFreeShipmentCount:I,planJetFreeShipmentCount:E,planMessage:{planMessageTitle:(n=T||{}).title,planMessageDescription:n.description,planMessageHideKYCButton:n.hide_kyc_btn,planMessageType:n.type},planIsSelected:R,planIsRecommended:C,planType:N,planPerks:null==A?void 0:A.map(function(e){var t,n;return{perkTitle:(t=e||{}).category,perkBenefits:null==(n=t.items)?void 0:n.map(function(e){var t,n,i,r,a,u;return n=(t=e||{}).title,i=t.type,r=t.value,a=t.badges,u=t.info,{benefitTitle:n,benefitType:i,benefitValue:r,benefitBadges:null==a?void 0:a.map(function(e){var t;return{badgeLabel:(t=e||{}).label,badgeType:t.type}}),benefitTooltip:u}})}}),planDirectDebit:{directDebitId:(i=q||{}).id,directDebitPrice:i.price,directDebitTotalPayablePrice:i.total_payable_price}}}n.d(t,{G:function(){return i}})},11259:function(e,t,n){"use strict";n.d(t,{O:function(){return l},x:function(){return o}});var i=n(53430),r=n(41435),a=n(12978),u=n(79968),s={active:i.VW.ACTIVE,ended:i.VW.ENDED,reserved:i.VW.RESERVED};function o(e){var t=e.data||{},n=t.id,i=t.plan_id,r=t.title,a=t.status,u=t.base_free_shipment,s=t.end_date,o=t.payed_price,l=t.purchased_date,d=t.invoice_url;return{digiplusDeliveryPackageId:n,digiplusDeliveryPackagePlanId:i,digiplusDeliveryPackageTitle:r,digiplusDeliveryPackageStatus:a,digiplusDeliveryPackageBaseFreeShipment:u,digiplusDeliveryPackageRemainingFreeShipment:t.remaining_free_shipment,digiplusDeliveryPackagePayedPrice:o,digiplusDeliveryPackagePurchasedDate:l,digiplusDeliveryPackageInvoiceUrl:d,digiplusDeliveryPackageEndDate:s}}function l(e){var t,n,i=e.data||{},l=i.id,d=i.title,c=i.start_at,p=i.end_at,f=i.remaining_days,g=i.all_used_free_shipments,v=i.remaining_free_shipments,_=i.remaining_free_shipments_fresh,m=i.remaining_free_shipments_jet,h=i.free_shipment_count,S=i.fresh_free_shipment_count,b=i.jet_free_shipment_count,P=i.remaining_days_till_start,y=i.total_free_shipments,D=i.status,I=i.price,E=i.discount,T=i.cash_back_details,R=i.has_invoice,C=i.plan,N=i.purchased_packages;return{digiplusSubscriptionId:l,digiplusSubscriptionTitle:d,digiplusSubscriptionStartAt:c,digiplusSubscriptionEndAt:p,digiplusSubscriptionRemainingDays:f,digiplusSubscriptionAllUsedFreeShipments:g,digiplusSubscriptionRemainingFreeShipments:v,digiplusSubscriptionRemainingFreeShipmentsFresh:_,digiplusSubscriptionRemainingFreeShipmentsJet:m,digiplusSubscriptionRemainingFreeShipmentCount:h,digiplusSubscriptionRemainingFreshFreeShipmentCount:S,digiplusSubscriptionRemainingJetFreeShipmentCount:b,digiplusSubscriptionRemainingDaysTillStart:P,digiplusSubscriptionTotalFreeShipments:y,digiplusSubscriptionStatus:s[D],digiplusSubscriptionPlan:(0,a.G)({data:C}),digiplusSubscriptionPurchasedPackages:null==N?void 0:null===(t=N.map)||void 0===t?void 0:t.call(N,function(e){return o({data:e})}),digiplusSubscriptionPrice:I,digiplusSubscriptionDiscount:E,digiplusSubscriptionCashBack:{digiplusCashbackPaidAmount:(n=T||{}).paid,digiplusCashbackPendingAmount:n.pending,digiplusCashbackTotalAmount:n.total},digiplusSubscriptionHasInvoice:!(0,r.x)(R),digiplusSubscriptionInvoiceLink:(0,u.f)({data:R})}}},95542:function(e,t,n){"use strict";n.d(t,{K:function(){return o}});var i=n(70865),r=n(64248),a=n(70582),u=n(79968),s=n(75743);function o(e){var t,n=e.data,o=e.prefix,l=n||{},d=l.id,c=l.title,p=l.see_more_url,f=l.icon,g=l.questions,v=(0,a.W)({data:f,prefix:"faqIcon"});return(0,r.Y)((0,i.Z)({faqIcon:(0,a.W)({data:f}),faqId:d,faqTitle:c,faqSeeMoreUrl:(0,u.f)({data:p}),faqQuestions:(null==g?void 0:null===(t=g.map)||void 0===t?void 0:t.call(g,function(e){return(0,s.Q)({data:e})}))||[]},v),{prefix:o})}},4818:function(e,t,n){"use strict";n.d(t,{D:function(){return f}});var i=n(70865),r=n(52322),a=n(64665),u=n(2784),s=n(5632),o={};function l(e){var t=o[e];void 0!==t&&window.scrollTo(0,t)}var d=n(42306),c=n(98324),p=n.n(c);function f(e){var t=e.component,n=e.getAPIMethods,c=e.layoutProps,f=e.isPrivate,g=e.noDefaultLoader,v=e.pageActivatorFeature,_=e.redirectIfLogin,m=e.afterLogin,h=e.disableSSR,S=e.dataProps,b=e.saveScrollPosition,P=void 0!==b&&b,y=function(e){return(!function(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=(0,s.useRouter)(),n=t.pathname;(0,u.useEffect)(function(){if(e){var i=function(){o[n]=window.scrollY},r=function(){setTimeout(function(){l(n)},0)};t.events.on("routeChangeStart",i),t.events.on("routeChangeComplete",r);var a=setTimeout(function(){l(n)},1e3);return function(){clearTimeout(a),t.events.off("routeChangeStart",i),t.events.off("routeChangeComplete",r)}}},[n,t,e])}(P),(0,d.d)(a.X.LITE_PAGE_ANIMATION))?(0,r.jsx)("div",{className:p().container,children:(0,r.jsx)(t,(0,i.Z)({},e))}):(0,r.jsx)(t,(0,i.Z)({},e))};return y.getAPIMethods=n,y.layoutProps=c,y.isPrivate=f,y.noDefaultLoader=g,y.pageActivatorFeature=v,y.redirectIfLogin=_,y.afterLogin=m,y.disableSSR=h,y.dataProps=S,y.saveScrollPosition=P,y}},40171:function(e,t,n){"use strict";n.d(t,{I:function(){return m}});var i=n(98788),r=n(70865),a=n(96670),u=n(22970),s=n(66582),o=n(89469),l=n(4547),d=n(79968),c=n(42306),p=n(41435),f=n(29890),g=n(74740),v=n(50020);function _(){return(_=(0,i.Z)(function(e){var t,n,i,a,s,c,f,_,m,h,S,b,P,y,D,I,E,T,R,C;return(0,u.__generator)(this,function(u){switch(u.label){case 0:if(t=e.getSSRMethods,n=e.query,i=e.queryParams,a=e.queryProps,s=e.renderAgent,f=(null==(c=(null==t?void 0:t({query:n,renderAgent:s}))||[])?void 0:c.length)>1?[]:{},_=null,o.ON)return[2,Promise.resolve({ssrData:f,queryData:_})];u.label=1;case 1:if(u.trys.push([1,8,,9]),(0,v.k)(a))return[3,3];return[4,null===(h=(m=(0,g.m)(a)?a({query:i,renderAgent:s}):a).apiMethod)||void 0===h?void 0:h.call(m,(0,r.Z)({},(0,g.m)(a.urlParamsTransformer)?a.urlParamsTransformer(n):n,(0,g.m)(a.apiData)?a.apiData((0,r.Z)({},i)):a.apiData),{queryParams:i})];case 2:_=u.sent(),u.label=3;case 3:if((0,p.x)(c))return[2,{ssrData:f,queryData:_}];if((null==c?void 0:c.length)!==1)return[3,5];return[4,(S=null==c?void 0:c[0]).apiMethod(S.apiData,{queryParams:i})];case 4:return f=u.sent(),[3,7];case 5:return[4,Promise.all(c.map(function(e){return(0,e.apiMethod)(e.apiData,{queryParams:i})}))];case 6:f=u.sent(),u.label=7;case 7:return[2,{ssrData:f,queryData:_}];case 8:return E=(null==(b=u.sent())?void 0:null===(P=b.data)||void 0===P?void 0:P.status)?null==b?void 0:null===(y=b.data)||void 0===y?void 0:y.status:(null==b?void 0:b.status)?null==b?void 0:b.status:500,T=(null==b?void 0:null===(D=b.data)||void 0===D?void 0:D.status)===301?(0,d.f)({data:null==b?void 0:null===(I=b.data)||void 0===I?void 0:I.redirect_url}):"",500===E&&(console.log("EXCEPTION-PREFETCH",b),(0,l.g)("API-500-ERROR",{endpoints:null==c?void 0:null===(R=c.map)||void 0===R?void 0:R.call(c,function(e){return null==e?void 0:e.url}),status:E,dataStatus:null==b?void 0:null===(C=b.data)||void 0===C?void 0:C.status,reqStatus:null==b?void 0:b.status})),404===E&&(0,l.g)("API 404!"),[2,Promise.resolve({ssrData:f,queryData:_,statusCode:E,redirectUrl:T})];case 9:return[2]}})})).apply(this,arguments)}var m=function(e){var t,n=e.getSSRMethods,l=e.pageActivatorFeature,d=e.queryProps,p=e.callback;return o.ON?void 0:(t=(0,i.Z)(function(e){var t,i,o,g,v,m,h,S,b,P,y,D,I;return(0,u.__generator)(this,function(u){switch(u.label){case 0:if(o={renderAgent:function(){var t,n,i,r;try{return(null===(n=(0,s.bG)(null===(i=e.req.headers)||void 0===i?void 0:i["user-agent"]))||void 0===n?void 0:n.isMobile)?"mobile":"desktop"}catch(a){console.log("ERROR user-agent:",null===(r=e.req.headers)||void 0===r?void 0:r["user-agent"],a)}return(null===(t=e.req.headers)||void 0===t?void 0:t["x-render-agent"])||"desktop"}()},e.res.setHeader("Cache-Control","public, max-age=".concat(21600)),l&&!(0,c.d)(l))return[2,{notFound:!0,props:{SSR_INTERNALS:o}}];g=null===(t=Object.keys(e.query||{}))||void 0===t?void 0:null===(i=t.filter)||void 0===i?void 0:i.call(t,function(t){var n;return!(null===(n=e.params)||void 0===n?void 0:n[t])}),v={},m=!0,h=!1,S=void 0;try{for(b=g[Symbol.iterator]();!(m=(P=b.next()).done);m=!0)v[y=P.value]=e.query[y]}catch(E){h=!0,S=E}finally{try{m||null==b.return||b.return()}finally{if(h)throw S}}if(!n&&!d)return[2,{props:{SSR_INTERNALS:o}}];return[4,function(e){return _.apply(this,arguments)}({getSSRMethods:n,renderAgent:o.renderAgent,queryProps:d,query:e.query,queryParams:v,pathname:e.path})];case 1:if(404===(D=u.sent()).statusCode)return[2,{notFound:!0,props:{SSR_INTERNALS:o}}];if(301===D.statusCode)return[2,{redirect:{destination:D.redirectUrl,permanent:!0},props:{SSR_INTERNALS:o}}];if(D.statusCode&&(e.res.statusCode=D.statusCode||200),I=null==p?void 0:p({props:D,query:e.query,params:e.params,queryParams:v}))return[2,(0,a.Z)((0,r.Z)({},I),{props:(0,a.Z)((0,r.Z)({},I.props||{}),{SSR_INTERNALS:o})})];return[2,{props:(0,a.Z)((0,r.Z)({},function e(t){if((0,f.k)(t)){var n=[];return t.forEach(function(t,i){void 0!==t&&(t===Object(t)?n[i]=e(t):n[i]=t)}),n}var i={};return Object.keys(t).forEach(function(n){var r=t[n];void 0!==r&&(r===Object(r)?i[n]=e(r):i[n]=r)}),i}(D)),{SSR_INTERNALS:o})}]}})}),function(e){return t.apply(this,arguments)})}},98661:function(e,t,n){"use strict";function i(e){var t=e.title,n=void 0===t?"":t,i=e.suffix,r=void 0===i?"":i,a=e.prefix,u=void 0===a?"":a;return"".concat(u?"".concat(u," - "):"","دیجی‌کالا").concat(n?" - ".concat(n):"").concat(r?" - ".concat(r):"")}n.d(t,{t:function(){return i}})},98324:function(e){e.exports={container:"styles_container__TOHrJ","fade-out":"styles_fade-out__Z1zNL"}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=1026)}),_N_E=e.O()}]);