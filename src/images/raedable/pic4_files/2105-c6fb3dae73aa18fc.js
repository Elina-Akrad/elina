"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2105],{72105:function(e,t,n){n.d(t,{c:function(){return K}});var s=n(47842),i=n(70865),r=n(96670),a=n(26297),o=n(66383),l=n(23945),d=n(52322),c=n(2784),u=n(5632),p=n(57931),m=n(1958),v=n(27174),f=n(73092),g=n(77353),x=n(64665),h=n(88413),b=n(93008),w=n(43202),L=n(26442),P=n(64177),S=n(51275),_=n(42306),j=n(9406),E=n(22848),N=n(72762),y=n(41435),C=n(72677),R=n(50020),k=n(5759),I=n(23075),T=n(43997),W=n(83178),Z=n(59641),F=n(94301),B=n(5769),A=n(18455),D=n(38416),O=n(50030),z=n(15847),H=n(46621),M=n.n(H),X={},q=(0,_.d)(x.X.PLP_INFINITE_SCROLL),V={};function K(e){var t,n,H,K,Q,G,J,U=e.pages,Y=void 0===U?[]:U,$=e.data,ee=e.pending,et=void 0!==ee&&ee,en=e.fetchNextPage,es=e.hasNextPage,ei=e.pageNumber,er=void 0===ei?1:ei,ea=e.shouldHideProductListHeader,eo=(e.productListHeaderSlot,e.shouldHideDesktopSidebar),el=e.sidebarSlot,ed=e.stickyBottomSlot,ec=e.stickySlot,eu=e.showFirstAd,ep=e.params,em=void 0===ep?{}:ep,ev=e.changeParams,ef=e.itemsKey,eg=void 0===ef?"products":ef,ex=e.disableClassicPagination,eh=void 0===ex?q:ex,eb=e.itemComponent,ew=e.wrapperClassName,eL=e.emptyComponent,eP=void 0===eL?(0,d.jsx)(f.T,{}):eL,eS=e.bannersComponent,e_=e.handelDisplayResult,ej=e.categoryResultSearch,eE=e.hasSearchInstead,eN=e.advertisementProducts,ey=e.advertisementBrand,eC=e.advertisementSponsoredBrand,eR=e.pendingAutoComplete,ek=(0,o.Z)((0,c.useState)(0),2),eI=ek[0],eT=ek[1];(0,c.useLayoutEffect)(function(){if((0,_.d)(x.X.LITE_PLP_PRESERVE_SCROLL)){var e=V[window.location.href];if("number"==typeof e){var t=function(){window.scrollTo(0,e),u.Router.events.off("routeChangeComplete",t)};return u.Router.events.on("routeChangeComplete",t),function(){u.Router.events.off("routeChangeComplete",t)}}}},[]),(0,c.useEffect)(function(){if((0,_.d)(x.X.LITE_PLP_PRESERVE_SCROLL)){var e=function(){V[window.location.href]=window.scrollY};return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}},[]);var eW=$||X,eZ=eW.sort,eF=eW.pager,eB=eW.filters,eA=eW.category,eD=eW.quickFilters,eO=em||X,ez=eO[w.uR],eH=eO[w.tn],eM=(eO[w.fH],(0,a.Z)(eO,[w.uR,w.tn,w.fH].map(l.Z))),eX=(0,k.h)(eH),eq=(0,S.pL)()||{},eV=eq.cartPayablePrice,eK=eq.cartPrice,eQ=(0,c.useRef)(),eG=(0,Z.a)({term:"search/ai"}),eJ=(0,Z.a)({term:"search/"}),eU=(0,P.C)().isDesktop,eY=(0,j.e)(),e$=(0,c.useMemo)(function(){return eo||!eU||!et&&(0,y.x)(eB)||eY},[eU,eo,et,eB,eY]),e0=(er>=b.yo||eX)&&!eh,e2=(0,c.useMemo)(function(){return((er>b.yo||eX)&&!eh?[[er,Y[er]]]:Object.entries(Y)).filter(function(e){var t=(0,o.Z)(e,2)[1];return!(0,R.k)(t)&&!(0,y.x)(t)})},[Y,er,eh,eX]),e1=(0,c.useMemo)(function(){var e,t;return!et&&(0,y.x)(null===(e=Object.entries(Y)[0])||void 0===e?void 0:null===(t=e[1])||void 0===t?void 0:t[eg])},[et,Y,eg]),e4=(0,c.useMemo)(function(){return!et&&(0,y.x)($)},[et,$]),e5=!ea&&!e4;(0,c.useEffect)(function(){return document.body.classList.add("overscroll-y-none"),function(){document.body.classList.remove("overscroll-y-none")}},[]);var e7=(0,o.Z)((0,c.useState)(!1),2),e6=e7[0],e3=e7[1];(0,c.useLayoutEffect)(function(){var e=function(){eQ.current&&e3(eQ.current.getBoundingClientRect().top<0)};return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}},[eQ]);var e8=(0,g.g)(eD,!et&&1===er),e9=e8.quickFilters,te=e8.hasQuickFilters,tt=(0,c.useMemo)(function(){return(0,y.x)(eB)?null:e5&&(0,_.d)(x.X.AB_TEST_FILTER_NEW_DESIGN)&&!eU?(0,d.jsx)(O.x,{sort:(0,r.Z)((0,i.Z)({},eZ),{sortActiveOptionId:ez}),pager:eF,pending:et,filters:eB,params:em,quickFilters:e9,changeParams:ev,category:eA,isScrolledPage:e6,textLenzEligibility:null==$?void 0:$.textLenzEligibility,onQuickFiltersResize:eT}):(0,d.jsx)(B.z,{sort:(0,r.Z)((0,i.Z)({},eZ),{sortActiveOptionId:ez}),pager:eF,pending:et,filters:eB,params:eM,changeParams:ev,category:eA})},[e5,eA,ev,eB,eU,e6,eM,eF,em,et,eZ,ez,e9,null==$?void 0:$.textLenzEligibility]),tn=(n=(t=(0,o.Z)((0,c.useState)("hidden"),2))[0],H=t[1],K=(0,P.C)().isDesktop,Q=(0,T.v9)(W.n.isWebView),G=(0,_.d)(x.X.SUPER_APP_WEB_PILLARS_VIEW),(0,c.useEffect)(function(){if(!K&&!Q&&G){var e,t,n=function(e){H(e.detail.variant)};return(null==window?void 0:null===(e=window.SuperWebSDK)||void 0===e?void 0:null===(t=e.navigationTabState)||void 0===t?void 0:t.variant)&&H(window.SuperWebSDK.navigationTabState.variant),window.addEventListener("superWebNavigationTabState",n),function(){window.removeEventListener("superWebNavigationTabState",n)}}},[]),{superWebState:n}).superWebState;return(0,d.jsxs)("div",{id:"ProductListPagesWrapper",className:(0,C.d)("relative w-full flex flex-col lg:flex-row items-center lg:items-stretch justify-between",M().ProductList__wrapper,ew),ref:eQ,children:[(0,d.jsxs)("section",{className:"w-full grow relative",children:[(0,d.jsx)("div",{className:(0,C.d)("lg:static sticky lg:top-14 top-16 bg-neutral-000 z-2",{"top-14":"hidden"===tn&&eJ&&!eG,"top-28":"compact"===tn}),children:tt}),te&&(0,d.jsx)("div",{style:{height:eI,width:"100%"}}),!eU&&(0,y.x)(eE)&&ej&&!(0,E.J)()&&!eG&&(0,d.jsx)(v.m,{handelDisplayResult:e_,categories:ej,pending:eR}),!eU&&(!(0,y.x)(eN)||!(0,y.x)(ey))&&!eG&&(0,d.jsx)(I.y,{advertisement:eC,position:h.BE.TOP_FILTER,className:(0,C.d)("mb-0 lg:mb-5 -mx-5 lg:mx-0",{"border-complete-t-200":(0,y.x)(eE)&&ej})}),!eU&&eF&&(0,d.jsx)(z.L,{totalItems:null==eF?void 0:eF.pagerTotalItems,pending:et}),(0,d.jsxs)("div",{className:(0,C.d)(M().ProductList__pagesContainer,(J={},(0,s.Z)(J,M()["ProductList__pagesContainer--withSidebar"],!e$||eY),(0,s.Z)(J,M()["ProductList__pagesContainer--withoutSidebar"],e$||!eY),J)),children:[e1?(0,d.jsx)("div",{className:M().ProductList__emptyWrapper,children:eP}):e2.map(function(e,t){var n=(0,o.Z)(e,2),s=n[0],i=n[1];return(0,d.jsx)(A.L,{page:i,bannersComponent:eS,pageIndex:t,itemComponent:eb,showFirstAd:eu&&!eU},s)}),(0,d.jsx)(D.N,{fetchNextPage:en,hasNextPage:void 0!==es&&es,pager:eF,pageNumber:er,pending:et,showSkeleton:(0,y.x)(e2),shouldShowClassicPagination:e0,changeParams:ev})]})]}),!e$&&(0,d.jsxs)("section",{className:(0,C.d)("flex flex-col",M().ProductList__sidebar),children:[el,(0,d.jsxs)(m.L,{enabled:!0,bottomBoundary:"#ProductListPagesWrapper",children:[ec,eU&&(0,d.jsx)(F.T,{filters:eB,params:eM,changeParams:ev,pending:et,category:eA}),(0,d.jsx)("div",{className:"py-3"}),ed]})]}),(0,j.e)()&&eU&&(0,d.jsx)("section",{className:(0,C.d)("flex flex-col mt-16",M().ProductList__coupon),children:(0,d.jsx)(m.L,{enabled:!0,bottomBoundary:"#ProductListPagesWrapper",children:(0,d.jsxs)("div",{className:(0,C.d)("border-complete border-neutral-300 p-4 rounded-lg background-white"),children:[(0,d.jsx)("div",{className:"text-neutral-500 text-lg",children:"شما در اینجا جمع هزینه‌ی کالا‌های کالابرگی را بدون احتساب تخفیف کالابرگ مشاهده می‌کنید"}),(0,d.jsx)("div",{className:"border-complete-b border-b-neutral-500 h-1 my-4"}),(0,d.jsxs)("div",{className:"flex flex-col",children:[(0,d.jsxs)("div",{className:"flex w-full",children:[(0,d.jsx)("span",{children:"جمع مبلغ سبد کالابرگی"}),(0,d.jsxs)("div",{className:"mr-auto",children:[(0,d.jsxs)("span",{className:"bold",children:[(0,N.j)(eK)," "]}),(0,d.jsx)("span",{className:"font-bold",children:"تومان"})]})]}),(0,d.jsx)(p.z,{className:"mt-4 w-full",disabled:!eV,to:(0,L.qR)(),children:"تایید و تکمیل سفارش"})]})]})})})]})}}}]);