(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8647],{43972:function(e,t,n){"use strict";n.d(t,{k:function(){return c}});var s=n(52322),i=n(43997),l=n(31909),r=n(98723),o=n(6013),a=n(72677),d=n(53548);function c(e){var t=e.deepLink,n=e.CROId,c=e.className,u=e.target,m=e.onClick,p=(0,i.v9)(o.p.isLoggedIn),x=t||{},f=x.deepLinksIconUrl,h=x.deepLinksTitle,v=x.deepLinksUrl,g=(0,a.d)("flex flex-col items-center user-select-none my-2 lg:my-0 lg:w-35 w-1/8",c);return(0,s.jsxs)(r.r,{onClick:m,shouldHandleUrlAndOnClick:!0,target:/#supermarkets|#digiplus/.test(v)?"_self":u,to:/my-digipay/.test(v)&&!p?(0,d.U)({toLoginRegisterRoute:!0}):v,className:g,CROId:void 0===n?"hp-ventures-icons":n,children:[(0,s.jsx)(l.E,{src:f,width:52,height:52,alt:h}),(0,s.jsx)("span",{className:"text-caption-strong text-neutral-700 mt-1 text-center px-3 lg:px-4",children:h})]})}},24034:function(e,t,n){"use strict";n.d(t,{A:function(){return x}});var s=n(52322),i=n(57931),l=n(31909),r=n(50603),o=n(66781),a=n(57394),d=n(40565),c=n(80803),u=n(99125),m={src:"/_next/static/media/magnet.144bcb91.svg",height:100,width:84},p=[{title:"امکان تولید محتوا",image:{src:"/_next/static/media/1.3170e1a9.svg",height:56,width:57}},{title:"ویدیوهای نقد و بررسی",image:{src:"/_next/static/media/2.01e66d70.svg",height:56,width:56}},{title:"مشاهده لایو‌ها",image:{src:"/_next/static/media/3.3a18949f.svg",height:56,width:57}}];function x(){var e=(0,c.d)(),t=e.isOpen,n=e.onOpen,x=e.onClose,f=(0,a.J)({action:u.nL,successCallback:x}),h=f.request,v=f.pending;return(0,d.x)([{event:o.bl,handler:n}]),(0,s.jsxs)(r.Modal,{headerTitle:"فعال‌سازی مگنت",isOpen:t,onDismiss:x,hasFooterTopShadow:!1,footer:(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)(i.z,{className:"flex-1 ml-2",size:"large",color:"primary",onClick:function(){return h({})},loading:v,disabled:v,children:"فعال‌سازی"}),(0,s.jsx)(i.z,{size:"large",className:"flex-1",color:"primary",shape:"outlined",onClick:x,children:"فعلا نه"})]}),childrenClassName:"flex flex-col items-center px-5 py-4",children:[(0,s.jsx)(l.E,{src:m,className:"mb-4"}),(0,s.jsx)("p",{className:"mb-4 text-body-1 text-neutral-900",children:"برای استفاده کامل از امکانات مگنت باید آن را فعال کنید."}),(0,s.jsx)("div",{className:"flex items-center gap-3 w-full",children:p.map(function(e,t){var n=e.title,i=e.image;return(0,s.jsxs)("div",{className:"flex flex-col items-center flex-1 text-center",children:[(0,s.jsx)(l.E,{src:i,className:"mb-2"}),(0,s.jsx)("span",{children:n})]},t)})})]})}},31192:function(e,t,n){"use strict";n.d(t,{E:function(){return a}});var s=n(52322),i=n(98780),l=n(72677),r=n(73186),o=n.n(r);function a(e){var t=e.className,n=e.direction,r=e.onClick,a="chevron".concat(n[0].toUpperCase()).concat(n.slice(1));return(0,s.jsx)("div",{onClick:r,className:(0,l.d)(t,"p-2 rounded-circle border-complete absolute bottom-0 top-0 m-auto h-max bg-neutral-000 cursor-pointer",o()[n]),children:(0,s.jsx)(i.J,{icon:a,color:"low-emphasis",size:24})})}},48442:function(e,t,n){"use strict";n.d(t,{A:function(){return m}});var s=n(52322),i=n(31909),l=n(98723),r=n(371),o=n(26442),a=n(72677),d=n(71390),c=n(51383),u=n(87225);function m(e){var t=e.className,n=e.user,m=e.descriptionSlot,p=e.backButtonOnClick,x=e.onSuccessFollowed,f=n||{},h=f.username,v=f.photo,g=f.isFollowing;return(0,s.jsxs)("div",{className:(0,a.d)(t,"flex justify-between items-center w-full"),children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(r.x,{color:"white",onClick:p}),(0,s.jsxs)(l.r,{className:"mr-5 flex items-center",to:(0,o.kK)(h),children:[(0,s.jsx)(i.E,{className:"shrink-0",imageClassName:"rounded-circle",image:v,src:d.C,height:40,width:40}),(0,s.jsxs)("div",{className:"mr-2",children:[(0,s.jsx)("p",{className:"text-h5 text-neutral-100",children:h}),m]})]})]}),(0,s.jsx)(c.P,{children:(0,s.jsx)(u.n,{isFollowing:g,username:h,color:"white",size:"small",onSuccess:x})})]})}},73066:function(e,t,n){"use strict";n.d(t,{j:function(){return s}});var s={NOT_STARTED:"not_started",STARTED:"started"}},48607:function(e,t,n){"use strict";n.d(t,{Y:function(){return l}});var s=n(66383),i=n(2784);function l(e){var t=e.onSwipedRight,n=e.onSwipedLeft,l=e.onSwipedUp,r=e.onSwipedDown,o=e.minSwipeDistance,a=void 0===o?75:o,d=(0,s.Z)((0,i.useState)(0),2),c=d[0],u=d[1],m=(0,s.Z)((0,i.useState)(0),2),p=m[0],x=m[1],f=(0,s.Z)((0,i.useState)(0),2),h=f[0],v=f[1],g=(0,s.Z)((0,i.useState)(0),2),j=g[0],b=g[1];return{onTouchStart:function(e){x(0),b(0),u(e.targetTouches[0].clientX),v(e.targetTouches[0].clientY)},onTouchMove:function(e){x(e.targetTouches[0].clientX),b(e.targetTouches[0].clientY)},onTouchEnd:function(){if(c&&p&&h&&j){var e=c-p,s=h-j;e>a&&n&&n(),e<-a&&t&&t(),s>a&&l&&l(),s<-a&&r&&r()}}}}},84941:function(e,t,n){"use strict";n.d(t,{A:function(){return r}});var s=n(70582),i=n(79968),l=n(96207);function r(e){var t=e.data||{},n=t.id,r=t.title,o=t.slug,a=t.cover,d=t.start_time,c=t.persian_calendar,u=t.countdown_text,m=t.badge_text,p=t.status,x=t.user,f=t.subscribed,h=t.link;return{dkLiveId:n,dkLiveTitle:r,dkLiveSlug:o,dkLiveCover:(0,s.W)({data:a}),dkLiveStartTime:d,dkLivePersianStartTime:c,dkLiveCountdownText:u,dkLiveBadgeText:m,dkLiveStatus:p,dkLiveUser:(0,l.s)({data:x}),dkLiveSubscribed:f,dkLiveLink:(0,i.f)({data:h})}}},47715:function(e,t,n){"use strict";n.d(t,{r:function(){return C}});var s=n(70865),i=n(96670),l=n(66383),r=n(50930),o=n(52322),a=n(2784),d=n(31909),c=n(50603),u=n(23248),m=n(51383),p=n(98780),x=n(11559),f=n(87049),h=n(6013),v=n(72677),g=n(71390),j=n(45227),b=n(1324),w=n(39368),N=(0,b.q)({url:function(e){var t=e.postId;return"/magnet/posts/".concat(t,"/comments/create/")},transformer:function(e){var t=(e.data||{}).comment;return{comment:(0,w.T)({data:t})}},inputTransformer:function(e){return{comment:e.commentBody}},type:j.XN.POST}),_=n(62075),k=(0,b.q)({url:function(e){var t=e.postId;return"/magnet/posts/".concat(t,"/comments/create/")},transformer:function(e){var t=(e.data||{}).comment;return{comment:(0,w.T)({data:t})}},inputTransformer:function(e){return{comment:e.commentBody,base_comment_id:e.commentId}},type:j.XN.POST});function y(e){var t=e.className,n=e.post,s=e.onCommentSent,i=e.inputDisabled,r=e.inputOnClick,c=e.replyTo,u=n||{},j=u.postId,b=u.postAuthor,w=(0,l.Z)((0,a.useState)(""),2),y=w[0],C=w[1],P=(0,f.v)(h.p.socialData).socialProfile,I=(0,x.E)({apiMethod:N,onSuccess:function(e){return s(e.comment)}}),L=I.request,S=I.pending,T=(0,x.E)({apiMethod:k,onSuccess:function(e){return s(e.comment)}}),M=T.request,R=T.pending,E=""===y.trim();(0,a.useEffect)(function(){c&&C("@".concat(null==c?void 0:c.username," "))},[c]);var O=function(e){e.preventDefault(),S||R||E||(c?M({postId:j,commentBody:y,commentId:null==c?void 0:c.commentId}):L({postId:j,commentBody:y}),C(""),(0,_.f3)({postId:j,postAuthorId:null==b?void 0:b.authorId}))};return(0,o.jsxs)("form",{onSubmit:O,className:(0,v.d)(t,"p-3 flex items-center gap-3 bg-neutral-100 border-complete rounded-large"),onClick:r,children:[(0,o.jsx)(d.E,{className:"shrink-0",imageClassName:"rounded-circle",image:null==P?void 0:P.socialProfileImage,src:g.C,height:24,width:24}),(0,o.jsx)("input",{className:"w-full border-none text-neutral-600 placeholder-neutral-300",placeholder:"دیدگاه خود را بنویسید ...",onChange:function(e){return C(e.target.value)},value:y,disabled:void 0!==i&&i}),!E&&(0,o.jsx)(m.P,{children:(0,o.jsx)(p.J,{icon:"send",color:S||R?"low-emphasis":"secondary",size:18,onClick:O})})]})}var C=(0,a.memo)(function(e){var t=e.post,n=e.isOpen,m=e.onClose,p=e.commentItemClassName,x=e.commentItemContainerClassName,f=e.inputDisabled,h=e.inputOnClick,v=e.modalClassName,g=e.onBigDataTracker,j=(t||{}).postId,b=(0,l.Z)((0,a.useState)(null),2),w=b[0],N=b[1],_=(0,l.Z)((0,a.useState)([]),2),k=_[0],C=_[1];return(0,a.useEffect)(function(){n&&g&&g(),n||N(null)},[n]),(0,o.jsx)(c.Modal,{header:(0,o.jsx)("span",{className:"text-h5 bg-neutral-000 px-1",children:"دیدگاه‌ها"}),isOpen:n,onDismiss:m,className:v,width:540,footer:(0,o.jsx)(y,{className:"mb-3 lg:mb-0",post:t,onCommentSent:function(e){w?C(function(t){return null==t?void 0:t.map(function(t){if(t.commentId===w.commentId){var n=(0,r.Z)(t.commentTopReplies||[]).concat([e]);return(0,i.Z)((0,s.Z)({},t),{commentTopReplies:n,commentRepliesCount:(t.commentRepliesCount||0)+1})}return t})}):C(function(t){return[e].concat((0,r.Z)(t))}),N(null)},inputDisabled:f,inputOnClick:h,replyTo:w}),onTouchEnd:function(e){e.stopPropagation()},children:(0,o.jsx)(u.D,{postId:j,disabled:!n,shouldDisplayLoading:!0,loadingClassName:"my-20",commentItemClassName:p,commentItemContainerClassName:x,onReplyClick:function(e,t){N({username:e,commentId:t})},emptyStateElement:(0,o.jsxs)("div",{className:"my-15 flex flex-col gap-3 justify-center items-center",children:[(0,o.jsx)(d.E,{src:"/statics/img/svg/empty-comments.svg",width:256,height:192,alt:"empty-comments"}),(0,o.jsx)("p",{className:"text-color-700 text-body-1",children:"اولین نفری باش که دیدگاه می‌نویسد!"})]}),setAllComments:C,allComments:k})})})},98544:function(e,t,n){"use strict";n.d(t,{D:function(){return x}});var s=n(52322),i=n(57931),l=n(31909),r=n(98723),o=n(50603),a=n(97411),d=n(26442),c=n(72677),u=n(71390),m=n(83679),p=n.n(m);function x(e){var t=e.posts,n=e.isOpen,m=e.onClose,x=e.toPostWithIndex;return(0,s.jsx)(o.Modal,{width:600,isOpen:n,onDismiss:m,hasFooterTopShadow:!1,headerTitle:"تماشای دوباره!",footer:(0,s.jsx)(i.z,{to:(0,d.ws)(),className:"w-full",children:"بازگشت به دیجی کالا"}),children:(0,s.jsx)(a.l,{items:t.map(function(e,t){var n,i,o,a,f;return(0,s.jsxs)("div",{className:"relative shrink-0 rounded-large overflow-hidden ml-2",onClick:function(){x(t),m()},children:[(0,s.jsx)(l.E,{objectFit:"cover",height:280,width:150,image:null===(n=e.postMedia)||void 0===n?void 0:null===(i=n[0])||void 0===i?void 0:i.postMediaSmallCover}),(0,s.jsxs)(r.r,{to:(0,d.kK)(null===(o=e.postAuthor)||void 0===o?void 0:o.authorUsername),className:(0,c.d)(p().VideoEndedModal__item,"flex flex-col gap-2 absolute bottom-0 left-0 right-0 min-h-25 px-2 pb-3 pt-2"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(l.E,{className:"shrink-0",imageClassName:"rounded-circle",image:null===(a=e.postAuthor)||void 0===a?void 0:a.authorPhoto,src:u.C,height:32,width:32}),(0,s.jsx)("p",{className:"text-body-1 text-white",children:null===(f=e.postAuthor)||void 0===f?void 0:f.authorUsername})]}),(0,s.jsx)("p",{className:"text-body2-strong text-white ellipsis-2",children:e.postTitle})]})]},e.postId)})})})}},59615:function(e,t,n){"use strict";n.d(t,{K:function(){return $}});var s=n(52322),i=n(2784),l=n(37149),r=n.n(l),o=n(64177),a=n(15585),d=n(72677),c=n(24034),u=n(31192),m=n(62075),p=n(70865),x=n(96670),f=n(66383),h=n(842),v=n(8830),g=n(98634),j=n(48442),b=n(42729),w=n(48607),N=n(98780),_=n(51383),k=n(96879),y=n(84714),C=n(47715),P={isLiked:{iconColor:"primary",iconName:"favoriteOn"},isDisliked:{iconColor:"white",iconName:"favoriteOff"}};function I(e){var t=e.className,n=e.post,i=e.postReaction,l=e.isOpenCommentModal,r=e.onOpenCommentModal,o=e.onCloseCommentModal,a=e.onSuccessLike,c=n||{},u=c.postCommentsCount,f=c.postId,h=c.postAuthor,v=(0,y.g)((0,x.Z)((0,p.Z)({},n),{postUserReaction:{isLiked:null==i?void 0:i.isPostLiked}}),a),g=v.handleLikePost,j=v.isLiked,b=v.likesCount,w=j?P.isLiked:P.isDisliked;return(0,s.jsxs)("div",{className:(0,d.d)(t,"flex gap-4 flex-col"),children:[(0,s.jsx)(_.P,{children:(0,s.jsxs)("span",{className:"cursor-pointer text-white flex flex-col items-center text-body-strong",onClick:function(){g(),(0,m.gj)({postId:f,postAuthorId:null==h?void 0:h.authorId})},children:[(0,s.jsx)(N.J,{color:w.iconColor,size:24,icon:w.iconName}),(0,s.jsx)(k.I,{value:b})]})}),(0,s.jsxs)("span",{className:"cursor-pointer text-white flex flex-col items-center text-body-strong",children:[(0,s.jsx)(N.J,{color:"white",size:24,icon:"comment",onClick:r}),(0,s.jsx)(k.I,{value:u})]}),(0,s.jsx)(C.r,{postId:f,post:n,isOpen:l,onClose:o,onBigDataTracker:function(){return(0,m.W0)({postId:f,postAuthorId:null==h?void 0:h.authorId})}})]})}var L=n(5046);function S(e){var t=e.className,n=e.post;return(0,s.jsx)("div",{className:(0,d.d)(t,"relative h-full"),children:(0,s.jsx)(L.l,{shouldDisplayShowMore:!1,titleColor:"text-neutral-100",captionColor:"text-neutral-100",post:n})})}var T=n(11559),M=n(92428),R=n(41435),E=n(36155),O=n(14052),D=n(52483),z=n(45227),Z=(0,n(1324).q)({url:"magnet/affiliate/",type:z.XN.POST,inputTransformer:function(e){return{post_id:e.postId,product_id:e.productId}}});function B(e){var t,n,l=e.className,r=e.products,o=e.postId,a=e.postAuthorId,c=(0,v.R)({modalId:b.f.VIDEO_BABY_PDP}),u=c.isOpen,h=c.onClose,g=c.onOpen,j=(0,f.Z)((0,i.useState)({productId:null,product:null}),2),w=j[0],N=j[1],_=(0,T.E)({apiMethod:E.z,onSuccess:function(e){var t=e.product;N(function(e){return(0,x.Z)((0,p.Z)({},e),{product:t})}),g()}}),k=_.request,y=_.pending,C=(0,T.E)({apiMethod:Z}).request,P=(0,i.useRef)(null),I=!1;return(0,R.x)(r)?null:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:(0,d.d)(l,"flex gap-2 overflow-x-auto overflow-y-auto hide-scrollbar bg-neutral-900 p-2"),onMouseDown:function(e){I=!0,t=e.pageX-P.current.offsetLeft,n=P.current.scrollLeft},onMouseLeave:function(e){I=!1},onMouseUp:function(e){I=!1},onMouseMove:function(e){if(I){e.preventDefault(),e.stopPropagation();var s=e.pageX-P.current.offsetLeft;P.current.scrollLeft=n-(s-t)*3}},ref:P,children:r.map(function(e,t){var n=e.productId,i=e.productImage,l=e.productTitle;return(0,s.jsx)(O.z,{loading:y&&n===w.productId,className:"ml-2 lg:ml-0 select-none",onClick:function(){N(function(e){return(0,x.Z)((0,p.Z)({},e),{productId:n})}),k({productId:n}),C({productId:n,postId:o}),(0,m.ah)({productId:n,postId:o,postAuthorId:a,placeIndex:t})},productImage:i,productTitle:l},n)})}),w.product&&(0,s.jsx)(D.J,{onAddToCart:function(e){(0,m.q_)({productId:e,postId:o,postAuthorId:a})},onShowMoreClicked:function(e){(0,m.dE)({productId:e,postId:o,postAuthorId:a})},isOpenModal:u,closeModal:function(){N({product:null,productId:null}),h()},product:w.product,type:M.J.MAGNET_LIVE})]})}var A=n(72610),F=n(7208);function V(e){var t=e.className,n=e.postMedia,l=e.videoTimer,r=e.setVideoTimer,o=e.playerRef,a=e.isPlaying,c=e.mediaUrl,u=(0,f.Z)((0,i.useState)(!1),2),m=u[0],h=u[1],v=(n||{}).postMediaUrl;return(0,s.jsxs)("div",{className:(0,d.d)(t,"relative"),onClick:function(e){e.stopPropagation(),h(function(e){return!e})},children:[(0,s.jsx)(A.g,{className:"absolute inset-0 mx-auto my-auto z-[-1]"}),(0,s.jsx)(F.Y,{url:v||c,height:"100%",width:"100%",ref:o,playing:a,muted:m,loop:!0,onDuration:function(e){r((0,x.Z)((0,p.Z)({},l),{duration:Math.floor(e)}))},onProgress:function(e){var t=e.playedSeconds,n=e.played;a&&r((0,x.Z)((0,p.Z)({},l),{playedSeconds:t,playedPercent:Math.floor(100*n)})),n>=.997&&setTimeout(function(){n>=.997&&o.current.seekTo(0,"seconds")},1e3)}}),m&&(0,s.jsx)(N.J,{color:"white",icon:"speakerMuted",className:"absolute right-0 left-0 top-0 bottom-0 m-auto w-max h-max",size:75})]})}var H=n(34479),U=n.n(H);function J(e){var t=e.className;return(0,s.jsx)("div",{className:(0,d.d)(t,U().VideoModalContentFooterOverlay)})}var W=n(57194),X=n.n(W);function q(e){var t=e.className;return(0,s.jsx)("div",{className:(0,d.d)(t,X().VideoModalContentHeaderOverlay)})}function G(e){var t,n,l,r=e.className,o=e.post,a=e.postReaction,c=e.onCloseVideoModal,u=e.onVideoEnded,N=e.toPreviousPost,_=e.toNextPost,k=e.updateLikeReaction,y=e.updateAuthorFollowedReaction,C=(0,v.R)({modalId:b.f.VIDEO_COMMENTS}),P=C.isOpen,L=C.onOpen,T=C.onClose,M=(0,i.useRef)(null),R=(0,f.Z)((0,i.useState)({duration:0,playedSeconds:0,playedPercent:0}),2),E=R[0],O=R[1],D=(0,i.useRef)(!1);(0,i.useEffect)(function(){if(E.playedPercent>95)D.current&&(D.current=!1);else if(E.playedSeconds>3&&!D.current){var e;(0,m.Qt)({postId:null==o?void 0:o.postId,postAuthorId:null===(e=o.postAuthor)||void 0===e?void 0:e.authorId}),D.current=!0}},[E]),(0,i.useEffect)(function(){D.current=!1},[o]);var z=(0,w.Y)({onSwipedRight:_,onSwipedLeft:N}),Z=z.onTouchStart,A=z.onTouchMove,F=z.onTouchEnd,H=(0,f.Z)((0,i.useState)(!0),2),U=H[0],W=H[1],X=(0,i.useCallback)((0,g.Ds)(function(e){var t,n=e.value;null==M||null===(t=M.current)||void 0===t||t.seekTo(n[0]/100,"fraction")},300),[]);return(0,s.jsxs)("div",{className:(0,d.d)(r,"flex flex-col"),children:[(0,s.jsxs)("div",{className:"w-full h-30 relative flex-1",onTouchStart:Z,onTouchMove:A,onTouchEnd:F,children:[(0,s.jsx)(q,{className:"absolute top-0 left-0 right-0 h-20 z-1"}),(0,s.jsx)(j.A,{className:"absolute top-0 left-0 right-0 z-2 px-5 pt-4",user:(0,x.Z)((0,p.Z)({},{username:(t=(null==o?void 0:o.postAuthor)||{}).authorUsername,photo:t.authorPhoto,isFollowing:t.authorIsFollowing}),{isFollowing:null==a?void 0:a.isAuthorFollowed}),onSuccessFollowed:y,backButtonOnClick:c}),(0,s.jsx)(V,{className:"w-full h-full",postMedia:null==o?void 0:null===(n=o.postMedia)||void 0===n?void 0:n[0],videoTimer:E,setVideoTimer:O,playerRef:M,isPlaying:U,onEnded:u}),(0,s.jsxs)("div",{className:"flex flex-col px-5 absolute bottom-0 right-0 left-0 z-2",children:[(0,s.jsx)(J,{className:"absolute inset-0 z-0"}),(0,s.jsxs)("div",{className:"z-1",children:[(0,s.jsxs)("div",{className:"flex items-end justify-between lg:gap-2 gap-4",children:[(0,s.jsx)(S,{post:o}),(0,s.jsx)(I,{post:o,postReaction:a,isOpenCommentModal:P,onOpenCommentModal:L,onCloseCommentModal:T,onSuccessLike:k})]}),(0,s.jsx)(h.Q,{onChange:X,videoTimer:E,onTouchMove:function(){U&&W(!1)},onTouchEnd:function(){W(!0)}})]})]})]}),(0,s.jsx)(B,{className:"shrink-0 grow-0",postId:null==o?void 0:o.postId,postAuthorId:null==o?void 0:null===(l=o.postAuthor)||void 0===l?void 0:l.authorId,products:null==o?void 0:o.postProducts})]})}var Y={overlay:{zIndex:4,backgroundColor:"rgba(0, 0, 0, 0.8)"}};function $(e){var t=e.post,n=e.postReaction,l=e.isOpen,p=e.onClose,x=e.toNextPost,f=e.toPreviousPost,h=e.hasNextPost,v=e.hasPreviousPost,g=e.onVideoEnded,j=e.updateLikeReaction,b=e.updateAuthorFollowedReaction,w=t||{},N=w.postId,_=w.postAuthor,k=(0,i.useRef)(window.innerHeight);(0,a.N)({condition:l});var y=(0,o.C)().isDesktop;(0,i.useEffect)(function(){l&&(0,m._H)({postId:N,postAuthorId:null==_?void 0:_.authorId})},[l]);var C=function(){(0,m.Yk)({postId:N,postAuthorId:null==_?void 0:_.authorId}),p()};return(0,s.jsxs)(r(),{isOpen:l,shouldCloseOnOverlayClick:!0,shouldCloseOnEsc:!0,onRequestClose:C,className:(0,d.d)("relative w-fit lg:px-20 mx-auto flex justify-center items-center flex-row"),style:Y,children:[y&&h&&(0,s.jsx)(u.E,{className:"my-auto",onClick:x,direction:"left"}),(0,s.jsx)("div",{className:"grow-0 lg:w-90 w-screen",style:y?{height:k.current>760?"720px":"".concat(.95*k.current,"px")}:{height:"".concat(k.current,"px")},children:(0,s.jsx)(G,{onCloseVideoModal:C,onVideoEnded:g,post:t,postReaction:n,className:"w-full h-full",toNextPost:x,toPreviousPost:f,updateLikeReaction:j,updateAuthorFollowedReaction:b})}),y&&v&&(0,s.jsx)(u.E,{className:"my-auto",onClick:f,direction:"right"}),(0,s.jsx)(c.A,{})]})}},842:function(e,t,n){"use strict";n.d(t,{Q:function(){return d}});var s=n(52322),i=n(60489),l=n(30834),r=n(73076),o=n(90830),a=n.n(o);function d(e){var t=e.onChange,n=e.videoTimer,o=e.onTouchMove,d=e.onTouchEnd,c=e.className,u=n.playedPercent,m=n.playedSeconds,p=(0,l.ox)(m),x=p.hours,f=p.minutes,h=p.seconds,v=0===Math.floor(Number((0,r.d)(x)))?"":"".concat(x,":"),g="".concat(v).concat(f,":").concat(h);return(0,s.jsxs)("div",{className:(0,l.dh)("w-full pt-4 pb-3 flex items-center justify-between gap-1",c),onTouchEnd:function(e){return e.stopPropagation()},children:[(0,s.jsx)(i.U,{direction:"ltr",handleClassName:"!bg-white !h-4 !w-4",activeRangeClassName:"!bg-white",rangeClassName:a().VideoPlayerSeeker__range,pipClassName:"hidden",min:0,max:100,onChange:t,value:[u],onTouchMove:o,onTouchEnd:d}),(0,s.jsx)("p",{className:"text-white text-caption-strong w-12 text-left",children:g})]})}},71338:function(e,t,n){"use strict";n.d(t,{S:function(){return x}});var s=n(52322),i=n(99345),l=n(43847),r=n(1324),o=(0,r.q)({url:"/social/v1/notification-center/announcement/message/",transformer:function(e){var t=e.data||{};return{title:t.title,description:t.description,icon:t.icon,color:t.color,emphasis:t.emphasis,size:t.size}},inputTransformer:function(e){return{cityId:e.cityId,stateId:e.stateId,clientPage:e.clientPage}},baseURL:function(){return l.V.GATEWAY_API_BASE_URL}}),a=n(72873),d=n(87049),c=n(83050),u=n(6013),m=n(41435),p=(0,r.q)({url:"/magnet/notification-center/announcement/message/",transformer:function(e){var t=e.data||{};return{title:t.title,description:t.description,icon:t.icon,color:t.color,emphasis:t.emphasis,size:t.size}},inputTransformer:function(e){return{cityId:e.cityId,stateId:e.stateId,clientPage:e.clientPage}}});function x(e){var t=e.className,n=e.clientPage,l=e.gateway,r=(0,d.v)(u.p.isLoggedIn),x=(0,d.v)(u.p.userCity),f=(0,d.v)(u.p.userState),h=(0,d.v)(c.E.userDefaultCity),v=r?null==x?void 0:x.cityId:null==h?void 0:h.cityId,g=r?null==f?void 0:f.stateId:null==h?void 0:h.cityStateId,j=(0,a.V)({apiMethod:l?o:p,apiData:{cityId:v,stateId:g,clientPage:n},dependencies:[v,g,n],disabled:!n}),b=j.data,w=j.pending,N=j.hasError;if(w||!v||!g||N||(0,m.x)(b)||!(null==b?void 0:b.description))return null;var _=b||{},k=_.title,y=_.description,C=_.icon,P=_.color,I=_.emphasis,L=_.size;return(0,s.jsx)("div",{className:t,children:(0,s.jsx)(i.kW,{color:P||"warning",emphasis:I||"tonal",size:L||"xl",title:k,description:y,rightIcon:C})})}},97721:function(e,t,n){"use strict";n.d(t,{B:function(){return m}});var s=n(66383),i=n(52322),l=n(5632),r=n.n(l),o=n(3005),a=n(1964),d=n(72677),c=n(3336),u={timerText:"text-subtitle-strong text-white w-1",timerSubText:"text-caption text-neutral-500",timerItem:"flex flex-col items-center justify-center bg-white w-[26px] h-[26px] rounded-sm",timer:"flex justify-center items-center text-subtitle-strong text-neutral-800 text-center w-[20px] h-[20px]",container:"flex gap-[2px] items-center right-0 h-6"};function m(e){var t=e.time,n=e.className,l=(0,o.J)(a.k.getCurrentDateTime().getTime()+t,{},r().reload),m=l&&(0,c.H)(l)&&l.split(":")||[],p=(0,s.Z)(m||[],3),x=p[0],f=p[1],h=p[2];return(0,i.jsxs)("div",{className:(0,d.d)(u.container,n),children:[(0,i.jsx)("div",{className:u.timerItem,children:(0,i.jsx)("div",{className:u.timer,children:x})}),(0,i.jsx)("div",{className:u.timerText,children:":"}),(0,i.jsx)("div",{className:u.timerItem,children:(0,i.jsx)("div",{className:u.timer,children:f})}),(0,i.jsx)("div",{className:u.timerText,children:":"}),(0,i.jsx)("div",{className:u.timerItem,children:(0,i.jsx)("div",{className:u.timer,children:h})})]})}},65765:function(e,t,n){"use strict";n.d(t,{C:function(){return q}});var s=n(47842),i=n(70865),l=n(96670),r=n(26297),o=n(66383),a=n(23945),d=n(52322),c=n(2784),u=n(5632),m=n(57931),p=n(54497),x=n(27174),f=n(73092),h=n(90713),v=n(94301),g=n(5769),j=n(38416),b=n(46621),w=n.n(b),N=n(50030),_=n(15847),k=n(96057),y=n(45227),C=n(64665),P=n(88413),I=n(93008),L=n(43202),S=n(26442),T=n(16991),M=n(64177),R=n(51275),E=n(42306),O=n(9406),D=n(22848),z=n(72762),Z=n(41435),B=n(72677),A=n(50020),F=n(5759),V=n(86662),H=n(16332),U=n(23075),J=n(59641),W={},X={};function q(e){var t,n=e.fetchNextPage,b=e.data,q=e.hasNextPage,G=e.params,Y=e.changeParams,$=e.pageNumber,Q=e.pending,K=e.pages,ee=e.stickySlot,et=e.sidebarSlot,en=e.stickyBottomSlot,es=e.didYouMeans,ei=e.pendingAutoComplete,el=e.handelDisplayResult,er=e.categoryResultSearch,eo=e.hasSearchInstead,ea=e.advertisementProducts,ed=e.advertisementBrand,ec=e.advertisementSponsoredBrand,eu=e.enableRequest,em=e.hideTopFilters,ep=e.hideMobilePagination,ex=b||W,ef=ex.sort,eh=ex.pager,ev=ex.filters,eg=ex.category,ej=ex.textLenzEligibility,eb=G||W,ew=eb[L.uR],eN=eb[L.tn],e_=(eb[L.fH],(0,r.Z)(eb,[L.uR,L.tn,L.fH].map(a.Z))),ek=(0,M.C)().isDesktop,ey=(0,O.e)(),eC=(0,F.h)(eN);(0,c.useEffect)(function(){eC&&G.previous_page_slots_count&&!Q&&Y(function(e){return e.previous_page_slots_count,(0,r.Z)(e,["previous_page_slots_count"])})},[eC,Q,Y,G.previous_page_slots_count]);var eP=(0,R.pL)()||{},eI=eP.cartPayablePrice,eL=eP.cartPrice,eS=(0,c.useRef)(),eT=(0,J.a)({term:"search/ai"});(0,c.useLayoutEffect)(function(){if((0,E.d)(C.X.LITE_PLP_PRESERVE_SCROLL)){var e=X[window.location.href];if("number"==typeof e){var t=function(){window.scrollTo(0,e),u.Router.events.off("routeChangeComplete",t)};return u.Router.events.on("routeChangeComplete",t),function(){u.Router.events.off("routeChangeComplete",t)}}}},[]),(0,c.useEffect)(function(){if((0,E.d)(C.X.LITE_PLP_PRESERVE_SCROLL)){var e=function(){X[window.location.href]=window.scrollY};return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}},[]);var eM=(0,c.useMemo)(function(){return!ek||!Q&&(0,Z.x)(ev)||ey},[ek,Q,ev,ey]),eR=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.withSidebar,n=void 0!==t&&t,s=(0,M.C)(),i=s.windowWidth,l=s.isDesktop;return{columns:(0,c.useMemo)(function(){return n?i>=T.j.XL4?5:i>=T.j.XL3?4:i>=T.j.XL?3:i>=T.j.LG||i>=T.j.SM?2:1:i>=T.j.XL4?6:i>=T.j.XL?5:i>=T.j.LG?3:i>=T.j.SM?2:1},[i,n]),windowWidth:i,isDesktop:l}}({withSidebar:!0}),eE=eR.columns,eO=eR.windowWidth,eD=(0,c.useRef)(eE);(0,c.useEffect)(function(){Y&&0!==eO&&(eD.current!==eE||!G.columns_per_page||G.columns_per_page!==eE.toString())&&(eD.current=eE,Y(function(e){var t=e||G,n=(t.previous_page_slots_count,(0,r.Z)(t,["previous_page_slots_count"]));return(0,l.Z)((0,i.Z)({},n),{columns_per_page:eE,q:(null==G?void 0:G.q)||(null==e?void 0:e.q)})})),G.columns_per_page&&(null==eu||eu())},[eE,Y,eO,G.columns_per_page,eu]);var ez=$>=I.yo||eC,eZ=(0,c.useMemo)(function(){if(Array.isArray(K))return($>I.yo||eC?[[$.toString(),K[$-1]]]:K.map(function(e,t){return[(t+1).toString(),e]})).filter(function(e){var t=(0,o.Z)(e,2)[1];return!(0,A.k)(t)&&!(0,Z.x)(t)});var e,t=Object.entries(K||{});return($>I.yo||eC?[[$.toString(),null===(e=t.find(function(e){return(0,o.Z)(e,1)[0]===$.toString()}))||void 0===e?void 0:e[1]]]:t).filter(function(e){var t=(0,o.Z)(e,2)[1];return!(0,A.k)(t)&&!(0,Z.x)(t)})},[K,$,eC]),eB=(0,c.useMemo)(function(){var e;return!Q&&!!eh&&(null!==(e=null==eh?void 0:eh.pagerTotalItems)&&void 0!==e?e:0)===0},[Q,eh]),eA=!(0,c.useMemo)(function(){return!Q&&(0,Z.x)(b)},[Q,b]);(0,c.useEffect)(function(){return document.body.classList.add("overscroll-y-none"),function(){document.body.classList.remove("overscroll-y-none")}},[]);var eF=(0,o.Z)((0,c.useState)(!1),2),eV=eF[0],eH=eF[1];(0,c.useLayoutEffect)(function(){var e=function(){eS.current&&eH(eS.current.getBoundingClientRect().top<0)};return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}},[eS]);var eU=(0,c.useMemo)(function(){return(0,Z.x)(ev)?null:eA&&(0,E.d)(C.X.AB_TEST_FILTER_NEW_DESIGN)&&!ek?(0,d.jsx)(N.x,{sort:(0,l.Z)((0,i.Z)({},ef),{sortActiveOptionId:ew}),pager:eh,pending:Q,filters:ev,params:G,changeParams:Y,category:eg,isScrolledPage:eV,textLenzEligibility:ej}):(0,d.jsx)(g.z,{sort:(0,l.Z)((0,i.Z)({},ef),{sortActiveOptionId:ew}),pager:eh,pending:Q,filters:ev,params:e_,changeParams:Y,category:eg})},[eA,eg,Y,ev,ek,eV,e_,eh,G,Q,ef,ew,ej]);return(0,d.jsxs)("div",{id:"ProductListPagesWrapper",className:(0,B.d)("relative w-full flex flex-col lg:flex-row items-center lg:items-stretch justify-between",w().ProductList__wrapper),ref:eS,children:[(0,d.jsxs)("section",{className:"w-full grow relative",children:[!(void 0!==em&&em)&&(0,d.jsx)("div",{className:"lg:static sticky lg:top-14 bg-neutral-000 z-2 top-16",children:eU}),!ek&&(0,Z.x)(eo)&&er&&!(0,D.J)()&&!eT&&!(0,Z.x)(ev)&&(0,d.jsx)(x.m,{handelDisplayResult:el,categories:er,pending:ei}),!ek&&(!(0,Z.x)(ea)||!(0,Z.x)(ed))&&!eT&&(0,d.jsx)(U.y,{advertisement:ec,position:P.BE.TOP_FILTER,className:(0,B.d)("mb-0 lg:mb-5 -mx-5 lg:mx-0",{"border-complete-t-200":(0,Z.x)(eo)&&er})}),!ek&&eh&&!(void 0!==ep&&ep)&&(0,d.jsx)(_.L,{totalItems:null==eh?void 0:eh.pagerTotalItems,pending:Q}),(0,d.jsxs)("div",{className:(0,B.d)(w().ProductList__pagesContainer,(t={},(0,s.Z)(t,w()["ProductList__pagesContainer--withSidebar"],!eM||ey),(0,s.Z)(t,w()["ProductList__pagesContainer--withoutSidebar"],eM||!ey),t)),children:[eB?(0,d.jsx)("div",{className:w().ProductList__emptyWrapper,children:(0,d.jsx)(f.T,{})}):eZ.map(function(e){var t=(0,o.Z)(e,2),n=t[0],s=t[1].widgets.find(function(e){return"vertical_product_listing"===e.type}),i=((null==s?void 0:s.data)||{}).widgets;return(0,d.jsx)(c.Fragment,{children:(void 0===i?[]:i).map(function(e,t){var s=e.id||"".concat(n,"-").concat(t);return"product"===e.type?(0,d.jsx)(V.O,{widget:e},s):(0,d.jsx)("div",{className:(0,B.d)("overflow-auto ",{"-mx-5 mb-4":"product"!==e.type&&!ek},w().NonProductWidgetWrapper),style:e.size?{gridColumn:"auto / span ".concat(e.size)}:{},children:(0,d.jsx)(V.O,{widget:e})},s)})},n)}),(0,d.jsx)(j.N,{fetchNextPage:function(){!eC&&$<=I.yo&&(e=null==eh?void 0:eh.pagerTotalSlots);var e,t=new URLSearchParams(window.location.search);t.set(y.Tx.PREVIOUS_PAGE_SLOTS_COUNT,e.toString()),t.set(y.Tx.COLUMNS_PER_PAGE,G.columns_per_page.toString()),window.history.replaceState(window.history.state,"","".concat(window.location.pathname,"?").concat(t.toString())),n()},hasNextPage:q,pager:eh,pageNumber:$,pending:Q,showSkeleton:(0,Z.x)(eZ),shouldShowClassicPagination:ez,changeParams:Y})]})]}),!eM&&(0,d.jsxs)("section",{className:(0,B.d)("flex flex-col",w().ProductList__sidebar),children:[(0,d.jsx)(h.I,{className:"mb-4",options:es}),!(0,A.k)(et)&&(0,d.jsx)(H.N,{banner:et,position:P.BE.TOP_FILTER,className:"mb-4"}),(0,d.jsxs)(p.L,{enabled:!0,bottomBoundary:"#ProductListPagesWrapper",children:[!(0,A.k)(ee)&&(0,d.jsx)(k.b,(0,i.Z)({className:"border-complete-200 rounded mb-4",type:I.nL.CPC,enableBigDataTrackerAdClickEvent:!0,enableBigDataTrackerAdViewEvent:!0},ee)),ek&&(0,d.jsx)(v.T,{filters:ev,params:e_,changeParams:Y,pending:Q,category:eg}),(0,d.jsx)("div",{className:"py-3"}),!(0,A.k)(en)&&(0,d.jsx)(H.N,{banner:en,position:P.BE.BOTTOM_FILTER,className:"mb-4"})]})]}),(0,O.e)()&&ek&&(0,d.jsx)("section",{className:(0,B.d)("flex flex-col mt-16",w().ProductList__coupon),children:(0,d.jsx)(p.L,{enabled:!0,bottomBoundary:"#ProductListPagesWrapper",children:(0,d.jsxs)("div",{className:(0,B.d)("border-complete border-neutral-300 p-4 rounded-lg background-white"),children:[(0,d.jsx)("div",{className:"text-neutral-500 text-lg",children:"شما در اینجا جمع هزینه‌ی کالا‌های کالابرگی را بدون احتساب تخفیف کالابرگ مشاهده می‌کنید"}),(0,d.jsx)("div",{className:"border-complete-b border-b-neutral-500 h-1 my-4"}),(0,d.jsxs)("div",{className:"flex flex-col",children:[(0,d.jsxs)("div",{className:"flex w-full",children:[(0,d.jsx)("span",{children:"جمع مبلغ سبد کالابرگی"}),(0,d.jsxs)("div",{className:"mr-auto",children:[(0,d.jsxs)("span",{className:"bold",children:[(0,z.j)(eL)," "]}),(0,d.jsx)("span",{className:"font-bold",children:"تومان"})]})]}),(0,d.jsx)(m.z,{className:"mt-4 w-full",disabled:!eI,to:(0,S.qR)(),children:"تایید و تکمیل سفارش"})]})]})})})]})}},86662:function(e,t,n){"use strict";n.d(t,{O:function(){return tD}});var s=n(70865),i=n(52322),l=n(64997),r=n(72873),o=n(41435),a=n(43847),d=n(1324),c=n(13006),u=(0,d.q)({url:function(e){return e.endpoint},transformer:function(e){var t=e.data;return(0,c.l_)(t)},baseURL:function(){return a.V.API_BASE_URL.replace("/v1","")}});function m(e){var t=e.widget,n=e.Component,l=t.url,a=(0,r.V)({apiData:{endpoint:l},apiMethod:u,disabled:!n}),d=a.data,c=a.pending,m=a.hasError;return c?n.getPlaceholder?n.getPlaceholder():null:m||(0,o.x)(d)||(0,o.x)(d.data)?null:(0,i.jsx)(n,(0,s.Z)({},d),t.type)}var p=n(26442),x=n(64177),f=n(72677),h=n(72610);function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"100px";return function(){return(0,i.jsx)("div",{className:"flex items-center justify-center",style:{height:"number"==typeof e?"".concat(e,"px"):e},children:(0,i.jsx)(h.g,{size:32})})}}var g=n(98780),j=n(31909),b=n(98723),w=n(31039),N=n(50069),_=n.n(N);function k(e){var t=e.brand,n=e.isFullScreen,s=void 0!==n&&n,l=e.isDesktop,r=e.onBrandClick,o=e.isInCarouselMode;return(0,i.jsxs)("div",{className:"w-full flex justify-between items-center gap-2",children:[(0,i.jsxs)(b.r,{to:t.url.uri||"/",onClick:function(e){e.stopPropagation(),null==r||r()},shouldHandleUrlAndOnClick:!0,className:(0,f.d)("flex gap-2.5 justify-center items-center bg-app-background-dark rounded-full p-0.5 pl-1.5",{"bg-transparent border-solid border-[1px] border-[#FFFFFF33]":s}),children:[(0,i.jsx)("div",{className:(0,f.d)("flex overflow-hidden rounded-full border-solid border-[1px] border-neutral-200",{"bg-white":s,"p-1.5 bg-white":!t.logo.url[0]}),children:t.logo.url[0]?(0,i.jsx)(j.E,{src:t.logo.url[0],alt:t.titleFa||"",width:l?40:28,height:l?40:28,className:_().productCard__blendBackground}):(0,i.jsx)(g.J,{size:l?20:16,icon:"seller"})}),(0,i.jsxs)("div",{className:"flex justify-center items-center gap-1",children:[(0,i.jsx)("span",{className:(0,f.d)("lg:text-h5-180 text-body1-strong ellipsis-1 mt-[1px]",{"text-neutral-850":!s,"text-app-background-mid-dark":s}),children:t.titleFa||""}),(0,i.jsx)(g.J,{icon:"cube-nav-chevron-left",color:s?"white":"black",size:l?24:20})]})]}),(0,i.jsxs)("div",{className:(0,f.d)("gap-1.5 justify-center items-center",{"sm:flex hidden":!o,flex:o}),children:[(0,i.jsx)(g.J,{icon:"ads",size:l?20:16,color:(0,w.$)("color-ad")}),(0,i.jsx)("span",{className:"inline text-caption-180 lg:text-body-2 text-neutral-500",children:"سفارشی"})]})]})}var y=n(2784),C=n(72762),P=n(52216),I=n(76778),L=(0,y.forwardRef)(function(e,t){var n,s,l,r,o=e.product,a=e.isFullScreen,d=void 0!==a&&a,c=e.onClick,u=(0,x.C)().isDesktop;return(0,i.jsxs)("div",{ref:t,onClick:c,className:(0,f.d)("w-full flex items-start gap-2.5 bg-white rounded-md overflow-hidden",{"p-2":d,"cursor-pointer":!!c}),children:[(0,i.jsx)("div",{className:(0,f.d)("flex flex-col justify-center items-center gap-2.5 lg:rounded-md",_().productCard__image),children:(0,i.jsx)(j.E,{src:(null===(n=o.image)||void 0===n?void 0:n.url)||"",alt:o.title||"",className:(0,f.d)("w-[110px] h-[110px] sm:w-[80px] sm:h-[80px] lg:w-[163px] lg:h-[163px]",_().productCard__blendBackground)})}),(0,i.jsxs)("div",{className:"w-full h-full flex flex-col justify-start items-start gap-2",children:[(0,i.jsx)("div",{className:"sm:hidden flex",children:(0,i.jsx)(k,{brand:o.brand,isDesktop:u})}),(0,i.jsxs)("div",{className:"flex flex-col items-start gap-1.5",children:[(0,i.jsxs)("div",{className:"ellipsis-2 lg:ellipsis-3 relative w-full",children:[(0,i.jsxs)("div",{className:"absolute right-0 top-0.5 flex justify-center items-center gap-1",children:[(0,i.jsx)("div",{className:(0,f.d)("w-4 h-4",{"inline-block sm:hidden":!d,hidden:d}),children:(0,i.jsx)(g.J,{icon:"ads",size:16,color:(0,w.$)("color-ad")})}),(0,i.jsx)("span",{className:(0,f.d)("inline text-caption text-neutral-500",{"sm:hidden":!d,hidden:d}),children:"سفارشی ."})]}),(0,i.jsx)("span",{className:"text-body1-strong-180 lg:text-h5 block sm:!indent-0 text-neutral-650 indent-14 s:indent-16",children:o.title||""})]}),o.rating&&(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(j.E,{className:"mb-0.5",height:16,width:16,src:"/statics/img/svg/pdp/star.svg",alt:"امتیاز"}),(0,i.jsx)("p",{className:"mr-1 text-body1-strong-compact text-icon-high-emphasis",children:(0,P.U)((0,I.OC)(o.rating.rate))})]})]}),(0,i.jsxs)("div",{className:"w-full flex justify-end items-center gap-1 mt-auto",children:[(null===(s=o.price)||void 0===s?void 0:s.discountPercent)>0&&(0,i.jsx)("div",{className:"flex justify-end items-center gap-1",children:(0,i.jsxs)("span",{className:"inline-block !h-4 px-1.5 pt-0.5 bg-hint-object-error rounded-full text-white text-body1-strong-compact flex justify-center items-center gap-0.5",children:["٪ ",(0,P.U)((null===(l=o.price)||void 0===l?void 0:l.discountPercent)||0)]})}),(0,i.jsxs)("div",{className:"flex gap-1 item-center justify-end text-h3-bold-compact",children:[(0,C.j)((null===(r=o.price)||void 0===r?void 0:r.sellingPrice)||0),(0,i.jsx)(g.J,{className:"flex justify-center items-center",icon:"cube-value-toman",size:16})]})]})]})]})}),S=n(50930),T=n(97411);function M(e){var t=e.products,n=e.isDesktop,s=e.allProductsLink,l=e.onProductClick,r=e.onSeeMoreClick,o=e.useProductViewTracking;return(0,i.jsx)("div",{className:"w-full overflow-auto hide-scrollbar",children:(0,i.jsx)(T.l,{sliderProps:{spaceBetween:1},items:[(0,i.jsx)("div",{className:"pr-0.5 h-1 bg-white"},"spacer-start")].concat((0,S.Z)(t.slice(0,8).map(function(e,t){var s,r,a,d;return(0,i.jsxs)("div",{ref:null==o?void 0:o(e.id,t),onClick:function(n){n.preventDefault(),n.stopPropagation(),null==l||l(e.id,t),setTimeout(function(){window&&window.open((0,p.H1)({productId:e.id}),"_blank")},0)},className:(0,f.d)("flex lg:flex-col gap-1.5 lg:gap-3 rounded-md lg:rounded-none bg-white","sm:w-[301px] sm:min-w-[301px] lg:w-[200px] lg:min-w-[200px] overflow-visible","border-[1px] border-neutral-200 lg:border-complete cursor-pointer"),style:{borderStyle:n?"none none none solid":"solid"},children:[(0,i.jsx)("div",{className:(0,f.d)("lg:bg-white lg:flex lg:w-full lg:justify-center",_().productCard__carouselImage),children:(0,i.jsx)(j.E,{src:(null===(s=e.image)||void 0===s?void 0:s.url)||"",alt:e.title||"",className:(0,f.d)("w-[82px] h-[82px] sm:w-[96px] sm:h-[96px] lg:w-[131px] lg:h-[131px]",_().productCard__blendBackground)})}),(0,i.jsxs)("div",{className:"flex flex-col justify-between items-center gap-1.5 lg:gap-1 pl-2 py-1.5 lg:px-3",children:[(0,i.jsx)("div",{className:"ellipsis-2 lg:ellipsis-3 w-full text-right",children:(0,i.jsx)("span",{className:"inline text-body-2-180 lg:text-caption text-icon-high-emphasis",children:e.title||""})}),(0,i.jsxs)("div",{className:"w-full flex justify-end items-center gap-1 h-5 min-w-[130px]",children:[(null===(r=e.price)||void 0===r?void 0:r.discountPercent)>0&&(0,i.jsx)("div",{className:"flex justify-end items-center gap-1",children:(0,i.jsxs)("span",{className:"!h-4 px-1.5 pt-0.5 bg-hint-object-error rounded-full text-white text-body1-strong-compact flex justify-center items-center gap-0.5 whitespace-nowrap",children:["٪ ",(0,P.U)((null===(a=e.price)||void 0===a?void 0:a.discountPercent)||0)]})}),(0,i.jsxs)("div",{className:"flex gap-1 item-center justify-end text-h5-180 text-neutral-650",children:[(0,C.j)((null===(d=e.price)||void 0===d?void 0:d.sellingPrice)||0),(0,i.jsx)(g.J,{className:"flex justify-center items-center",icon:"cube-value-toman",size:16})]})]})]})]},"product-".concat(e.id||t))})),[t.length>8&&(0,i.jsxs)(b.r,{to:void 0===s?"/":s,shouldHandleUrlAndOnClick:!0,className:"flex flex-col items-center justify-center px-3 lg:px-5 py-1 h-[84px] lg:h-full text-n-800",onClick:function(e){null==r||r()},children:[(0,i.jsx)("div",{className:"p-0.5 border-solid border-[1px] border-neutral-650 rounded-circle",children:(0,i.jsx)(g.J,{icon:"arrowLeft",size:32,color:(0,w.$)("color-neutral-650")})}),(0,i.jsx)("span",{className:"whitespace-nowrap mt-2 text-caption-strong-compact text-neutral-650",children:"مشاهده فروشنده"})]},"see-more"),(0,i.jsx)("div",{className:"pr-0.5 h-1"},"spacer-end")]),navigationButtonSize:"small",hasNavigationButtonsShadow:!0,className:"gap-2.5 lg:gap-0 items-stretch"})})}function R(e){var t=e.products,n=e.isFullScreen,s=void 0!==n&&n,l=e.isDesktop,r=e.onProductClick,o=e.onBrandClick,a=e.onSeeMoreClick,d=e.useProductViewTracking;return t.length?1===t.length?(0,i.jsxs)("div",{className:(0,f.d)("flex sm:flex-col sm:gap-2 lg:gap-5 items-start px-4 pt-3 pb-2 lg:p-0",{"flex-col gap-2":s}),children:[(0,i.jsx)("div",{className:(0,f.d)("w-full",{"hidden sm:flex":!s,flex:s}),children:(0,i.jsx)(k,{brand:t[0].brand,isFullScreen:s,isDesktop:l,onBrandClick:o,isInCarouselMode:!1})}),(0,i.jsx)(L,{product:t[0],isFullScreen:s,ref:null==d?void 0:d(t[0].id,0),onClick:function(){return null==r?void 0:r(t[0].id,0)}})]}):(0,i.jsxs)("div",{className:"flex flex-col gap-2.5 lg:gap-5 items-start pt-3 pb-4 lg:p-0",children:[(0,i.jsx)("div",{className:"flex w-full justify-between items-center gap-2 px-3 lg:px-0",children:t[0]&&(0,i.jsx)(k,{brand:t[0].brand,isInCarouselMode:!0,isFullScreen:s,isDesktop:l,onBrandClick:o})}),(0,i.jsx)(M,{products:t,isDesktop:l,allProductsLink:(0,p.H1)({productId:t[0].id}),onProductClick:r,onSeeMoreClick:a,useProductViewTracking:d})]}):null}var E=n(57931),O=n(7208),D=(0,y.forwardRef)(function(e,t){var n=e.video,s=e.isFullScreen,l=e.isPlaying,r=e.isMute,o=e.showControls,a=e.currentTime,d=e.duration,c=e.progressPercentage,u=e.onProgress,m=e.onDuration,p=e.onPlay,x=e.onPause,v=e.onReady,j=e.onMouseEnter,b=e.onMouseLeave,N=e.togglePlayPause,k=e.toggleMute,y=(e.goFullScreen,e.leaveFullScreen),C=e.handleProgressChange,I=e.formatTime,L=e.videoPosterRef,S=e.videoRef;return(0,i.jsx)("div",{ref:t,className:(0,f.d)("transition-all lg:w-1/2 lg:rounded-md lg:overflow-hidden",{"fixed top-0 left-0 w-screen h-screen z-[999] bg-black flex justify-center items-center":s}),children:(0,i.jsxs)("div",{className:"aspect-[16/9] lg:aspect-[unset] w-full relative flex justify-center items-center h-full",onMouseEnter:j,onMouseLeave:b,children:[(0,i.jsx)(O.Y,{ref:S,url:(null==n?void 0:n.contentUrl)||(null==n?void 0:n.contentUrlMp4)||"",poster:(null==n?void 0:n.thumbnailUrl)||"",className:"relative object-cover object-center",width:"100%",height:"100%",loop:!0,playsinline:!0,muted:r,playing:l,onProgress:u,onDuration:m,onPlay:p,onPause:x,onReady:v}),(0,i.jsx)("div",{ref:L,className:(0,f.d)("absolute top-0 left-0 w-full h-full z-2 flex justify-center items-center",_().blurOverlay),children:(0,i.jsx)(h.g,{color:"white"})}),!s&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(E.z,{removePadding:!0,mode:"text",onClick:N,className:"p-3 rounded-full !absolute right-0 top-0",children:(0,i.jsx)("div",{className:(0,f.d)("border-solid border-[1px] rounded-full p-1.5",_().controlButton),children:(0,i.jsx)(g.J,{size:20,color:(0,w.$)("color-app-background-mid-dark"),icon:l?"cube-media-pause":"cube-media-play"})})}),(0,i.jsx)(E.z,{removePadding:!0,mode:"text",onClick:k,className:"p-3 rounded-full !absolute right-0 bottom-0",children:(0,i.jsx)("div",{className:(0,f.d)("border-solid border-[1px] rounded-full p-1.5",_().controlButton),children:(0,i.jsx)(g.J,{size:20,color:(0,w.$)("color-app-background-mid-dark"),icon:r?"cube-device-speaker-off":"cube-device-speaker"})})})]}),s&&(0,i.jsxs)("div",{className:(0,f.d)("absolute bottom-[20px] left-0 w-full bg-gradient-to-t from-black/80 to-transparent transition-opacity duration-300",{"opacity-100":s,"opacity-0":!o&&!s}),onMouseEnter:j,onMouseLeave:b,children:[(0,i.jsx)("div",{className:"px-4",children:(0,i.jsx)("div",{className:"relative",children:(0,i.jsx)("input",{type:"range",min:"0",max:"100",value:c,onChange:C,className:(0,f.d)("w-full h-1 bg-white/30 rounded-lg appearance-none cursor-pointer ltr",_().slider,_().progressBar),style:{"--progress-percentage":"".concat(c,"%")}})})}),(0,i.jsxs)("div",{className:"flex items-center justify-between px-4 pb-4",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(E.z,{removePadding:!0,mode:"text",onClick:y,className:"p-2 rounded-full",children:(0,i.jsx)("div",{className:(0,f.d)("border-solid border-[1px] rounded-full p-1.5",_().controlButtonTransparent),children:(0,i.jsx)(g.J,{size:20,color:"white",icon:"cube-action-fullscreen1"})})}),(0,i.jsx)(E.z,{removePadding:!0,mode:"text",onClick:k,className:"p-2 rounded-full",children:(0,i.jsx)("div",{className:(0,f.d)("border-solid border-[1px] rounded-full p-1.5",_().controlButtonTransparent),children:(0,i.jsx)(g.J,{size:20,color:"white",icon:r?"cube-device-speaker-off":"cube-device-speaker"})})})]}),(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsxs)("div",{className:"flex items-center gap-1 text-white text-h5-regular",children:[(0,i.jsx)("span",{children:(0,P.U)(I(a))}),(0,i.jsx)("span",{children:"/"}),(0,i.jsx)("span",{children:(0,P.U)(I(d))})]}),(0,i.jsx)(E.z,{removePadding:!0,mode:"text",onClick:N,className:"p-2 rounded-full",children:(0,i.jsx)("div",{className:(0,f.d)("border-solid border-[1px] rounded-full p-1.5",_().controlButtonTransparent),children:(0,i.jsx)(g.J,{size:20,color:"white",icon:l?"cube-media-pause":"cube-media-play"})})})]})]})]})]})})}),z=n(30834);function Z(e){var t=e.showMore,n=e.brand,s=e.title,l=e.isDesktop,r=e.onSeeMoreClick;return t?(0,i.jsxs)("div",{onClick:function(e){e.stopPropagation(),null==r||r()},className:"flex flex-col gap-3 items-start py-3 px-4",children:[(0,i.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(null==n?void 0:n.id)&&(0,i.jsx)("div",{className:(0,f.d)("flex overflow-hidden rounded-full border-solid border-[1px] border-neutral-200",{"w-[48px] h-[48px] min-w-[48px] min-h-[48px]":l,"w-10 h-10 min-w-[40px] min-h-[40px]":!l}),children:(0,i.jsx)(j.E,{src:n.logoUrl,alt:n.title||"",width:l?48:40,height:l?48:40,className:_().productCard__blendBackground})}),(0,i.jsxs)("div",{className:"ellipsis-2 lg:ellipsis-3 relative w-full",children:[(0,i.jsxs)("div",{className:"absolute right-0 top-0.5 flex justify-center items-center gap-1",children:[(0,i.jsx)("div",{className:"w-4 h-4 inline-block",children:(0,i.jsx)(g.J,{icon:"ads",size:16,color:(0,z.$l)("color-ad")})}),(0,i.jsx)("span",{className:"inline text-caption !font-medium text-neutral-500",children:"سفارشی ."})]}),(0,i.jsx)("span",{className:"text-h5-180 !font-medium block text-icon-high-emphasis indent-16",children:s||""})]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-center gap-1 rounded-lg bg-app-background-dark text-body1-strong-180 text-neutral-650 pr-3 pl-1.5 py-1",children:[t.title,(0,i.jsx)(g.J,{icon:"chevronLeft",size:16,color:(0,z.$l)("color-neutral-650")})]})]}):null}var B=n(66383),A=n(12289),F=n(8155),V=n(15585);function H(e){var t,n,s,l,r,o,a,d,c,u,m,h,v,g,j,b,w,N,_,k=e.data,C=k||{},P=C.products,I=void 0===P?[]:P,L=C.video,S=C.showMore,T=C.brand,M=C.title,E=(0,x.C)().isDesktop,O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoPlayOnVisible,n=void 0===t||t,s=(0,y.useRef)(null),i=(0,y.useRef)(null),l=(0,B.Z)((0,y.useState)(!0),2),r=l[0],o=l[1],a=(0,B.Z)((0,y.useState)(!1),2),d=a[0],c=a[1],u=(0,B.Z)((0,y.useState)(!1),2),m=u[0],p=u[1],x=(0,B.Z)((0,y.useState)(0),2),f=x[0],h=x[1],v=(0,B.Z)((0,y.useState)(0),2),g=v[0],j=v[1],b=(0,B.Z)((0,y.useState)(!1),2),w=b[0],N=b[1],_=(0,B.Z)((0,A.R)({threshold:.5,rootMargin:"0px"}),2),k=_[0],C=_[1];(0,V.N)({condition:m}),(0,y.useEffect)(function(){!m&&n&&(C?(o(!0),c(!0)):c(!1))},[C,m,n]);var P=function(){o(!1)},I=function(){o(!0)};return{state:{isMute:r,isPlaying:d,isFullScreen:m,currentTime:f,duration:g,showControls:w,progressPercentage:g>0?f/g*100:0},refs:{videoRef:s,videoPosterRef:i,containerRef:k},handlers:{handleProgress:function(e){h(e.playedSeconds)},handleDuration:function(e){j(e)},handlePlay:function(){c(!0)},handlePause:function(){c(!1)},removePoster:function(){var e;null===(e=i.current)||void 0===e||e.remove()},toggleMute:function(){o(!r)},unMute:P,mute:I,togglePlayPause:function(){c(!d)},goFullScreen:function(){p(!0),P()},leaveFullScreen:function(){p(!1),d||(c(!0),I())},handleProgressChange:function(e){var t=s.current;if(t&&g>0){var n=parseFloat(e.target.value)/100*g;t.seekTo(n,"seconds"),h(n)}},handleMouseEnter:function(){return N(!0)},handleMouseLeave:function(){return N(!1)}},formatters:{formatTime:function(e){return"".concat(Math.floor(e/60).toString().padStart(2,"0"),":").concat(Math.floor(e%60).toString().padStart(2,"0"))}},isInViewport:C}}({autoPlayOnVisible:!0}),z=O.state,H=O.refs,U=O.handlers,J=O.formatters,W=(l=(s=k||{}).adsId,r=s.campaignId,a=void 0===(o=s.products)?[]:o,d=s.showMore,c=(0,y.useRef)(!1),u=(0,y.useRef)(!1),m=(0,y.useRef)(new Set),h=(0,y.useRef)(new Set),v=null===(t=a[0])||void 0===t?void 0:null===(n=t.brand)||void 0===n?void 0:n.id,g=void 0,b=(j=(0,B.Z)((0,A.R)({threshold:.5,rootMargin:"0px"}),2))[0],j[1],N=(w=(0,B.Z)((0,A.R)({threshold:.5,rootMargin:"0px"}),2))[0],_=w[1],(0,y.useEffect)(function(){_&&!u.current&&l&&r&&((0,F.e7)({adsId:l,campaignId:r,productIds:a.map(function(e){return e.id}),brandId:v,sellerId:g}),u.current=!0)},[_,l,r,a,v,g]),{videoContainerRef:b,widgetContainerRef:N,useProductViewTracking:function(e,t){var n=(0,B.Z)((0,A.R)({threshold:.5,rootMargin:"0px"}),2),s=n[0],i=n[1];return(0,y.useEffect)(function(){i&&!m.current.has(e)&&l&&r&&((0,F.ZF)({adsId:l,campaignId:r,productId:e,brandId:v,sellerId:g,index:t>=0?t+1:void 0}),m.current.add(e))},[i,e,t,l,r,v,g]),s},handleVideoClick:function(){if(l&&r){var e="video_click";if(!h.current.has(e)){var t=1===a.length;d&&0===a.length?(0,F.tQ)({adsId:l,campaignId:r,brandId:v,sellerId:g,showMore:!0}):t?(0,F.tQ)({adsId:l,campaignId:r,productId:a[0].id,brandId:v,sellerId:g,showMore:!1}):(0,F.tQ)({adsId:l,campaignId:r,brandId:v,sellerId:g,showMore:!1}),h.current.add(e),setTimeout(function(){h.current.delete(e)},1e3)}}},handleProductClick:function(e,t){if(l&&r){var n="product_click_".concat(e);h.current.has(n)||((0,F.CM)({adsId:l,campaignId:r,productId:e,brandId:v,sellerId:g,index:t>=0?t+1:void 0}),h.current.add(n),setTimeout(function(){h.current.delete(n)},1e3))}},handleBrandClick:function(){if(l&&r){var e="brand_click";h.current.has(e)||((0,F.BD)({adsId:l,campaignId:r,brandId:v,sellerId:g}),h.current.add(e),setTimeout(function(){h.current.delete(e)},1e3))}},checkVideoViewEvent:function(e){e>=3&&!c.current&&l&&r&&((0,F.tU)({adsId:l,campaignId:r,productIds:a.map(function(e){return e.id}),brandId:v,sellerId:g}),c.current=!0)},handleSeeMoreClick:function(){if(l&&r){var e="see_more_click";h.current.has(e)||((0,F.tQ)({adsId:l,campaignId:r,brandId:v,sellerId:g}),h.current.add(e),setTimeout(function(){h.current.delete(e)},1e3))}}}),X=W.videoContainerRef,q=W.widgetContainerRef,G=W.useProductViewTracking,Y=W.handleVideoClick,$=W.handleProductClick,Q=W.handleBrandClick,K=W.checkVideoViewEvent,ee=W.handleSeeMoreClick,et=1===I.length,en=function(){Y(),window&&et?window.open((0,p.H1)({productId:I[0].id}),"_blank"):window&&0===I.length&&S&&window.open(S.url.url,"_blank")};return L&&(0!==I.length||S)?(0,i.jsx)("div",{ref:q,className:(0,f.d)("p-4 pb-0 lg:p-0",{"cursor-pointer":et}),children:(0,i.jsxs)("div",{ref:X,onClick:en,className:(0,f.d)("flex flex-col lg:flex-row lg:p-5 border border-neutral-200 border-solid rounded-md lg:rounded-lg overflow-hidden lg:gap-5",{"cursor-pointer":et||S}),children:[(0,i.jsx)(D,{ref:H.containerRef,video:L,isFullScreen:z.isFullScreen,isPlaying:z.isPlaying,isMute:z.isMute,showControls:z.showControls,currentTime:z.currentTime,duration:z.duration,progressPercentage:z.progressPercentage,onProgress:function(e){U.handleProgress(e),K(e.playedSeconds)},onDuration:U.handleDuration,onPlay:U.handlePlay,onPause:U.handlePause,onReady:U.removePoster,onMouseEnter:U.handleMouseEnter,onMouseLeave:U.handleMouseLeave,togglePlayPause:U.togglePlayPause,toggleMute:U.toggleMute,goFullScreen:U.goFullScreen,leaveFullScreen:U.leaveFullScreen,handleProgressChange:U.handleProgressChange,formatTime:J.formatTime,videoPosterRef:H.videoPosterRef,videoRef:H.videoRef}),z.isFullScreen&&(0,i.jsx)("div",{className:"fixed bottom-[120px] left-0 w-full",children:(0,i.jsx)(R,{products:I,isFullScreen:!0,isDesktop:E,onProductClick:$,onBrandClick:Q,onSeeMoreClick:ee,useProductViewTracking:G})}),I.length>0&&(0,i.jsx)("div",{className:"w-full lg:w-1/2 overflow-hidden",children:(0,i.jsx)(R,{products:I,isFullScreen:!1,isDesktop:E,onProductClick:$,onBrandClick:Q,onSeeMoreClick:ee,useProductViewTracking:G})}),0===I.length&&S&&(0,i.jsx)(Z,{showMore:S,brand:T,title:M,isDesktop:E,onSeeMoreClick:function(){ee(),en()}})]})}):null}H.getPlaceholder=v("370px");var U=n(47842),J=n(8830),W=n(96670),X=n(16514),q=n(26297),G=n(62069),Y=function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=(0,G.D)(),r=null!==(n=null!==(t=i.widgetName)&&void 0!==t?t:e)&&void 0!==n?n:"unknown_widget",o=i.pageInfo,a=(0,q.Z)(i,["pageInfo"]),d=o?(0,c.mH)(o):void 0;return(0,s.Z)((0,W.Z)((0,s.Z)({},a),{cityId:l,widgetName:r}),d?{pageInfo:d}:{})};function $(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.utm,i=t.eventData,l=Y(n,void 0===i?{}:i),r=(e=(0,y.useRef)(null),{isClickDuplicated:function(t){var n=Date.now();return!!e.current&&e.current.key===t&&n-e.current.timeStamp<600||(e.current={key:t,timeStamp:n},!1)}}).isClickDuplicated;return{widgetViewRef:(0,B.Z)((0,X.Z)({eventData:l,callback:F.n5,disableHook:!1}),1)[0],carouselViewRef:(0,B.Z)((0,X.Z)({eventData:l,callback:F.bY,disableHook:!1}),1)[0],bannerViewRef:(0,B.Z)((0,X.Z)({eventData:l,callback:F.qX,disableHook:!1}),1)[0],onWidgetClick:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.itemName,n=void 0===t?"main":t;r("".concat(l.widgetName,"::").concat(n))||(0,F.d0)((0,W.Z)((0,s.Z)({},l),{clickedItemName:n}))},onCarouselClick:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r("".concat(l.widgetName,"::carousel"))||(0,F.ID)((0,s.Z)({},l,e))},onBannerClick:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r("".concat(l.widgetName,"::banner"))||(0,F.kE)((0,s.Z)({},l,e))}}}var Q=n(50603);function K(e){var t,n,s=e.isOpen,l=e.onClose,r=e.debts,a=e.credit,d=e.modalWidth,c=e.debt,u=e.paymentLink,m=null==r?void 0:r.length,p=null==r?void 0:r.reduce(function(e,t){return e+(null!==(n=t.penaltyWaiverAmount)&&void 0!==n?n:0)},0);return(0,i.jsxs)(Q.Modal,{shouldCloseOnPageChange:!1,isOpen:s,header:(0,i.jsx)("div",{className:"flex items-center",children:(0,i.jsx)("span",{className:"text-body2 text-neutral-800",children:m?"پرداخت بدهی‌های دیجی‌پی":"الان بخر، بعدا پرداخت کن!"})}),onDismiss:l,hasCloseIcon:!0,childrenClassName:"pt-3 px-4 pb-2",bottomSheetContentClassName:"max-h-[70vh] rounded-t-large",width:d,children:[!!m&&!c&&(0,i.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,i.jsx)("p",{className:"text-neutral-850 text-h5-regular-180",children:(0,o.x)(r)?"":2===r.length?"برای استفاده از تمام ظرفیت پرداخت اعتباری در خریدها و جلوگیری از جریمه، بدهی خود را زودتر پرداخت کنید.":(null===(t=r[0])||void 0===t?void 0:t.providerType)==="bnpl"?"برای جلوگیری از جریمه در وام دیجی‌پی، بدهی خود را زودتر پرداخت کنید.":"برای استفاده از تمام ظرفیت پرداخت اعتباری در خریدها و جلوگیری از جریمه، بدهی خود را زودتر پرداخت کنید."}),p?(0,i.jsxs)("div",{className:"bg-background-success px-2 py-1.5 flex items-start gap-3 rounded-md",children:[(0,i.jsx)(g.J,{icon:"cube-alert-info",className:"mt-1",size:20,color:(0,w.$)("color-hint-text-success")}),(0,i.jsxs)("p",{className:"text-body1-strong",children:[(0,C.j)(p)," تومان بخشودگی در پرداخت، در صورتی که همین الان پرداخت کنید."]})]}):null,r.map(function(e,t){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"py-2 flex items-center justify-between gap-3",children:[(0,i.jsx)("div",{className:"p-2 bg-gradient-silver rounded-full",children:(0,i.jsx)(g.J,{icon:"bnpl"===e.providerType?"cube-payment-loan":"cube-payment-credit",size:20})}),(0,i.jsxs)("div",{className:"flex flex-col gap-0.5 flex-1",children:[(0,i.jsxs)("div",{className:"flex gap-0.5",children:[(0,i.jsx)("p",{className:"text-h4-compact text-neutral-650",children:(0,C.j)(e.debt)}),(0,i.jsx)(g.J,{icon:"toman",size:14})]}),(0,i.jsx)("p",{className:"text-body1-strong-180 text-hint-object-error",children:"bnpl"===e.providerType?"قسط وام دیجی‌پی":"بدهی خرید اعتباری"})]}),(0,i.jsx)(E.z,{className:"!p-0 !pl-1.5 !pr-3 !h-9 ",mode:"filled",appendIcon:"chevronLeft",appendIconClassName:"fill-white",size:"medium",to:e.debtPayLink,target:"_blank",children:"پرداخت"})]}),t!==r.length-1&&(0,i.jsx)("hr",{className:"mx-[7.5px] h-[1px] border-none bg-neutral-200"})]})})]}),!m&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:(0,f.d)("mb-4 pt-3 w-full pl-4 pr-3 pb-4 rounded-md bg-right bg-contain text-white",'bg-[url("/statics/img/png/bnpl-bg.png")] bg-no-repeat',{"bg-digipay":!c,"bg-hint-object-error":c}),children:(0,i.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,i.jsxs)("div",{className:"w-full flex justify-between items-center",children:[(0,i.jsx)("span",{className:"text-h4-180 ml-auto",children:c?"مقدار بدهی":"موجودی اعتبار"}),(0,i.jsx)("div",{className:"flex items-center mr-auto",children:c?(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("span",{className:"text-h4-180 ml-1",children:(0,P.U)((0,C.j)(c))}),(0,i.jsx)(g.J,{icon:"toman",size:16,color:"white",className:"mb-1"})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"text-h4-180",children:(0,P.U)((0,C.j)(a))}),(0,i.jsx)(g.J,{icon:"toman",size:"20",className:"mr-0.5 mb-1",color:"white"})]})})]}),(0,i.jsxs)("div",{className:"flex w-full items-center justify-start",children:[(0,i.jsx)("span",{className:"ml-2 text-body-1-compact mt-0.5",children:"قدرت گرفته از"}),(0,i.jsx)(g.J,{icon:"cube-brand-digipay-logotype-en",color:"white",size:16,style:{height:"16px",width:"56px"}}),(0,i.jsx)(g.J,{icon:"cube-brand-digipay-logo",color:"white",size:16,style:{height:"16px"}})]})]})}),c?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"text-h5 text-neutral-800",children:"شما به دیجی‌پی بدهکار هستید"}),(0,i.jsx)("p",{className:"text-body-1-180 mt-0.5",children:"برای استفاده از تمام ظرفیت پرداخت اعتباری در خریدها، بدهی خود را از یکم تا پنجم همین ماه پرداخت کنید تا شامل جریمه نشوید."})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h5",{className:"text-h5",children:"چطور با اعتبارم خرید کنم؟"}),(0,i.jsx)("p",{className:"text-body-1-180 mt-0.5",children:"با موجودی اعتبارت، الان بخر و بعدا پرداخت کن. بازپرداخت آن را بین یک تا چهار قسط از اول تا پنجم ماه بعد انجام دهید. فقط کافی است در مرحله پرداخت، گزینه \xabپرداخت اعتباری دیجی‌پی\xbb را انتخاب کنید."})]}),c?(0,i.jsx)(E.z,{className:"!border-none mt-4 !bg-button-primary !text-white",mode:"filled",size:"large",to:u,target:"_blank",children:"پرداخت بدهی"}):(0,i.jsx)(E.z,{className:"!border-none mt-4 !bg-neutral-100 !text-black",mode:"filled",size:"large",onClick:l,children:"باشه، فهمیدم"})]})]})}var ee=n(82276),et=n.n(ee);function en(e){var t,n=e.data,s=e.eventData,l=e.utm,r=n.credit,o=n.debt,a=n.bnplCreditData,d=n.paymentLink,c=n.threshold,u=$({eventData:s,utm:l}),m=u.onWidgetClick,p=u.widgetViewRef,h=(0,x.C)().isDesktop,v=(0,J.R)({modalId:"bnpl"}),j=v.isOpen,b=v.onClose,N=v.onOpen,_=(null==a?void 0:a.length)||o;return h||!_&&r<=c?null:(0,i.jsxs)("div",{className:"container-2xl-w mx-auto lg:px-4 2xl:px-0 mt-4",ref:p,children:[(0,i.jsx)("div",{className:((0,f.d)(et().Bnpl__animation),"overflow-hidden"),onClick:function(){m({itemName:"widget_body"}),N()},children:(0,i.jsxs)("div",{className:(0,f.d)((t={},(0,U.Z)(t,et()["Bnpl__card--debt"],_),(0,U.Z)(t,et().Bnpl__card,!_),t),"mx-4 py-3 pl-2 pr-3 items-center rounded-medium border-neutral-200 border-solid border-[1px] flex justify-between"),children:[_?(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(g.J,{icon:"calendarCard",className:"ml-3",color:(0,w.$)("color-hint-object-error")}),(0,i.jsxs)("div",{className:"flex flex-col gap-1.5",children:[(0,i.jsx)("div",{className:"flex items-center",children:(0,i.jsx)("p",{className:"text-body1-strong-compact text-hint-object-error",children:"پرداخت بدهی دیجی‌پی"})}),(0,i.jsx)("div",{className:"flex items-center",children:(0,i.jsx)("span",{className:"text-body2-strong-compact text-hint-object-error",children:"بدهی شما به دیجی‌پی در انتظار پرداخت است."})})]})]}):(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(g.J,{icon:"calendarCard",className:"ml-3",color:(0,w.$)("color-digipay")}),(0,i.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,i.jsx)("p",{className:"text-body1-strong-compact text-neutral-800",children:"الان بخر، بعدا پرداخت کن!"}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("span",{className:"text-body-1-compact ml-1 text-icon-high-emphasis",children:"موجودی اعتبار:"}),(0,i.jsx)("span",{className:"text-body1-strong-compact text-neutral-800",children:(0,P.U)((0,C.j)(r))}),(0,i.jsx)(g.J,{icon:"toman",size:"16",className:"mr-0.5 fill-neutral-800 mb-0.5"})]})]})]}),(0,i.jsxs)("div",{className:"flex mr-3 items-center",children:[!!_&&(0,i.jsx)("span",{className:"text-body1-strong-compact text-hint-object-error",children:"پرداخت"}),(0,i.jsx)(g.J,{icon:"chevronLeft",color:_?(0,w.$)("color-hint-object-error"):(0,w.$)("color-digipay")})]})]})}),(0,i.jsx)(K,{isOpen:j,credit:r,debts:a,onClose:b,debt:o,paymentLink:d})]})}en.getPlaceholder=v("79px");var es=n(97721),ei=n(79593),el=n(57306);function er(e){var t=e.id,n=e.image,s=e.price,l=e.title,r=e.className,o=e.onClick;return(0,i.jsxs)(b.r,{target:"_blank",shouldHandleUrlAndOnClick:!0,to:(0,p.H1)({productId:t}),onClick:o,className:(0,f.d)("min-w-[130px] overflow-hidden ","flex flex-col justify-between bg-white p-2",r),children:[(0,i.jsx)("div",{className:"overfow-hidden rounded-md",children:(0,i.jsx)(j.E,{width:114,height:114,src:n.url,alt:n.alt||l,imageClassName:"rounded-md"})}),(0,i.jsxs)("div",{className:"h-full mt-2 flex flex-col gap-2 w-full justify-between items-start",children:[(0,i.jsx)("p",{className:"text-body1-strong-180 text-neutral-650 h-10 w-full ellipsis-2",children:l}),(0,i.jsx)(el.t,{className:(0,f.d)("bg-red flex flex-col h-10.5 pt-0.5",{"!justify-start !items-start":s.discountPercent,"!flex-row !justify-start !items-end":!s.discountPercent}),price:s.rrpPrice,sellingPrice:s.sellingPrice,discount:s.discountPercent,productDiscountPercent:s.discountPercent,discountOnTop:!0,compactPrice:!0})]})]},t)}function eo(e){var t,n=e.data,l=e.utm,r=e.eventData,a=n.products,d=n.style,c=n.headerImage,u=n.icon,m=n.seeMore,p=n.shouldOpenNewTab,x=$({eventData:(0,W.Z)((0,s.Z)({},r),{products:a,bigDataCarouselName:l,url:ei.s?null:null==window?void 0:null===(t=window.location)||void 0===t?void 0:t.pathname}),utm:l}),h=x.widgetViewRef,v=x.onWidgetClick,w=x.carouselViewRef,N=x.onCarouselClick,_=(0,y.useCallback)(function(e){e&&(h.current=e,w.current=e)},[h,w]),k=(d||{}).backgroundColors,C=(0,y.useMemo)(function(){var e=0;return(a||[]).forEach(function(t){var n,s=+((null===(n=t.price)||void 0===n?void 0:n.timer)||0);e=s>0&&(s<e||0===e)?s:e}),1e3*e},[a]),P=function(){return v({itemName:"مشاهده همه"})},I=function(e){var t=e.productItem;return function(){var e;v({itemName:t.title}),N({products:a,productId:t.id,url:ei.s?null:null==window?void 0:null===(e=window.location)||void 0===e?void 0:e.pathname})}},L=(a||[]).map(function(e,t){return(0,i.jsx)(er,(0,W.Z)((0,s.Z)({},e),{onClick:I({productItem:e}),className:(0,f.d)({"rounded-r-md":0===t})}))}),M=(0,y.useMemo)(function(){return{background:"linear-gradient(225deg, ".concat(k.map(function(e,t){var n=t/(k.length-1)*100;return"".concat(e," ").concat(n,"%")}).join(", "),")")}},[k]);return L.push((0,i.jsx)(b.r,{target:p?"_blank":"_self",shouldHandleUrlAndOnClick:!0,to:(null==m?void 0:m.url)||"",onClick:P,className:"min-w-[140px] overflow-hidden rounded-l-md bg-white",children:(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center h-full",children:[(0,i.jsx)("div",{className:"rounded-circle p-1 border-2 border-icon-high-emphasis border-solid",children:(0,i.jsx)(g.J,{icon:"arrowLeft",size:32})}),(0,i.jsx)("p",{className:"text-neutral-700 mt-3 text-body1-strong",children:"مشاهده همه"})]})})),(0,i.jsxs)("div",{ref:_,className:"pb-4 mt-4",style:M,children:[(0,i.jsxs)("div",{className:"pt-5 px-4 pb-3 flex justify-start items-center",children:[(0,i.jsx)(j.E,{className:"ml-2",src:u.url,width:24,height:24,alt:u.alt}),(0,i.jsx)(j.E,{className:"ml-4 max-w-[220px] max-h-[26px]",src:c.url,width:108,height:20,alt:c.alt}),!(0,o.x)(C)&&!Number.isNaN(C)&&(0,i.jsx)(es.B,{time:C}),(0,i.jsxs)(b.r,{to:(null==m?void 0:m.url)||"",target:p?"_blank":"_self",shouldHandleUrlAndOnClick:!0,onClick:P,className:"flex justify-center items-center text-button-2 text-white mr-auto",children:["همه",(0,i.jsx)(g.J,{icon:"chevronLeft",size:18,color:"white"})]})]}),(0,i.jsx)(T.l,{items:[(0,i.jsx)("div",{className:"pr-2"})].concat((0,S.Z)(L),[(0,i.jsx)("div",{className:"pr-2"})]),className:"gap-0.5 w-full mt-1",sliderProps:{slidesOffsetAfter:0,slidesOffsetBefore:0}})]})}eo.getPlaceholder=v("354px");var ea=n(64665),ed=n(88413),ec=n(42306),eu=n(43997),em=n(6013),ep=n(53548);function ex(e){var t=e.deepLink,n=e.CROId,s=e.className,l=e.target,r=e.onClick,o=(0,eu.v9)(em.p.isLoggedIn),a=t||{},d=a.deepLinksIconUrl,c=a.deepLinksTitle,u=a.deepLinksUrl,m=(0,f.d)("flex flex-col items-center user-select-none max-w-15",s);return(0,i.jsxs)(b.r,{onClick:r,shouldHandleUrlAndOnClick:!0,target:/#supermarkets|#digiplus/.test(u)?"_self":l,to:/my-digipay/.test(u)&&!o?(0,ep.U)({toLoginRegisterRoute:!0}):u,className:m,CROId:void 0===n?"hp-ventures-icons":n,children:[(0,i.jsx)(j.E,{src:d,width:52,height:52,alt:c}),(0,i.jsx)("span",{className:"text-caption-strong-180 w-full text-neutral-700 mt-1 text-center ellipsis-2",children:c})]})}var ef=n(47072),eh=n(43972),ev=n(73585),eg=n.n(ev);function ej(e){var t=e.isOpen,n=e.onClose,s=e.services,l=e.groupServices,r=(0,eu.v9)(em.p.isLoggedIn);return(0,i.jsx)(Q.Modal,{shouldCloseOnPageChange:!1,isOpen:t,onDismiss:n,headerClassName:"py-0 px-5",header:(0,i.jsx)(ef.D,{title:"خدمات دیجی‌کالا",rightIcon:"dkSmile",rightIconColor:"primary"}),rounded:"large",children:(0,i.jsxs)("div",{className:"w-full relative lg:min-w-145 mt-5",children:[(0,i.jsx)("div",{className:"grid grid-cols-3 lg:grid-cols-6 gap-y-3",children:null==s?void 0:s.map(function(e){return(0,i.jsx)(eh.k,{CROId:e.deepLinksTitle,deepLink:e,className:"lg:w-[80px]"},e.deepLinksId)})}),(null==l?void 0:l.length)>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h4",{className:"text-body1-strong text-neutral-500 mt-6",children:"سرویس‌های گروه دیجی‌کالا"}),(0,i.jsx)("div",{className:"lg:grid grid-cols-2 gap-3 mt-2",children:null==l?void 0:l.map(function(e){return(0,i.jsxs)(b.r,{target:/#supermarkets|#digiplus/.test(e.deepLinksUrl)?"_self":"_blank",to:/my-digipay/.test(e.deepLinksUrl)&&!r?(0,ep.U)({toLoginRegisterRoute:!0}):e.deepLinksUrl,className:(0,f.d)("flex items-start border-complete-b lg:rounded-large lg:border-complete-200 py-3 lg:px-3",eg().shortcutsModal__serviceBox),CROId:"hp-ventures-icons",children:[(0,i.jsx)(j.E,{src:e.deepLinksIconUrl,width:52,height:52,alt:e.deepLinksTitle,className:"rounded-large shrink-0"}),(0,i.jsxs)("div",{className:"mr-3 grow",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsx)("p",{className:"text-subtitle-strong text-neutral-700",children:e.deepLinksTitle}),(0,i.jsx)(g.J,{icon:"arrowLeft",size:24,className:"mr-4",color:"low-emphasis"})]}),(0,i.jsx)("p",{className:"text-body-2 text-neutral-500",children:e.deepLinksDescription})]})]},e.deepLinksId)})})]})]})})}var eb=n(88238),ew=n.n(eb);function eN(e){var t,n=e.data,s=e.utm,l=$({eventData:e.eventData,utm:s}).widgetViewRef,r={services:(t=(({items:n.items}).items||[]).map(function(e){var t,n,s,i,l;return n=(t=e||{}).description,s=t.id,i=t.image,l=t.isDigikalaService,{deepLinksId:s,deepLinksTitle:t.title,deepLinksUrl:t.url.url,deepLinksIconUrl:i.url,deepLinksDescription:n,deepLinksIsDigikalaGroupService:l}})).filter(function(e){return!e.deepLinksIsDigikalaGroupService}),groupServices:t.filter(function(e){return e.deepLinksIsDigikalaGroupService}),allItems:t},o=r.allItems,a=r.groupServices,d=r.services,c=(0,x.C)().isDesktop,u=(0,J.R)({modalId:"deep-link-others"}),m=u.isOpen,p=u.onClose,h=u.onOpen,v=(0,f.d)("w-full mt-4 bg-neutral-000 flex-wrap gap-3",{"flex overflow-x-auto flex-nowrap overflow-y-hidden hide-scrollbar":(0,ec.d)(ea.X.FRESH_TOUCHPOINTS),"grid grid-cols-4 justify-items-center lg:flex":!(0,ec.d)(ea.X.FRESH_TOUCHPOINTS)}),j=(0,f.d)("bg-neutral-100 rounded-circle flex justify-center items-center text-neutral-400",ew().MainHomeDeepLinks__moreButton),b=function(e){return function(){(0,F.d0)({clickedItemName:e.deepLinksTitle,widgetName:ed.cn})}},w=(0,ec.d)(ea.X.FRESH_TOUCHPOINTS)?a.length>3?c?3:1:(c?7:5)-a.length:a.length>3?3:7-a.length,N=(0,ec.d)(ea.X.FRESH_TOUCHPOINTS);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:v,ref:l,children:[(0,i.jsx)("div",{className:"mr-1"})," ",N?o.slice(0,c?9:8).map(function(e){return(0,i.jsx)(ex,{onClick:b(e),CROId:e.deepLinksTitle,className:"shrink-0 lg:!w-[82px] w-15",deepLink:e,target:"_blank"},e.deepLinksId)}):(0,i.jsxs)(i.Fragment,{children:[a.slice(0,4).map(function(e){return(0,i.jsx)(ex,{onClick:b(e),CROId:e.deepLinksTitle,className:"shrink-0 w-15",deepLink:e,target:"_blank"},e.deepLinksId)}),d.slice(0,w).map(function(e){return(0,i.jsx)(ex,{onClick:b(e),CROId:e.deepLinksTitle,className:"shrink-0 w-15",deepLink:e},e.deepLinksId)})]}),(0,i.jsxs)("div",{onClick:h,className:(0,f.d)("shrink-0 w-15 flex flex-col items-center user-select-none cursor-pointer"),children:[(0,i.jsx)("div",{className:j,onClick:b(o[o.length-1]),children:(0,i.jsx)(g.J,{icon:"moreHoriz",size:32,color:"low-emphasis"})}),(0,i.jsx)("span",{className:"text-caption-strong-180 w-full text-center text-neutral-700 mt-1",children:"بیشتر"})]}),(0,i.jsx)("div",{className:"mr-1"})," "]}),(0,i.jsx)(ej,{isOpen:m,onClose:p,services:d,groupServices:a})]})}eN.getPlaceholder=v("122px");var e_=n(29890);function ek(e){var t=e.banner,n=e.className,s=e.imageClassName,l=e.disableLazyLoad,r=t||{},o=r.image,a=r.title,d=r.url,c=r.id,u=$({eventData:{bannerId:c}}),m=u.bannerViewRef,p=u.onBannerClick,x=(0,f.d)("block h-full w-full",n),h=(0,f.d)(s,"border border-solid border-[#0C0C0C12]");return(0,i.jsx)(b.r,{to:d.url,onClick:function(){return p({bannerId:c})},shouldHandleUrlAndOnClick:!0,target:"_blank",className:x,children:(0,i.jsx)("div",{ref:m,className:"w-full bg-[rgba(0,0,0,0.04)] flex justify-center items-center rounded-md",children:(0,i.jsx)(j.E,{disableLazyLoad:l,alt:o.alt,title:a,src:o.url,objectFit:"cover",imageClassName:h,className:"user-select-none z-1 top-0 w-full h-full",rounded:8})})})}function ey(e){var t=e.banners,n=$({eventData:e.eventData}).widgetViewRef,s=t.length;return 0===s?null:1===s?(0,i.jsx)("div",{className:"mt-5 mx-4",ref:n,children:(0,i.jsx)(ek,{banner:t[0],disableLazyLoad:!0,imageClassName:"apsect-[5/2]"},t[0].id)}):2===s?(0,i.jsxs)("div",{className:"flex flex-col gap-2 mt-5 mx-4",ref:n,children:[(0,i.jsx)(ek,{banner:t[0],disableLazyLoad:!0,imageClassName:"apsect-[5/2]"},t[0].id),(0,i.jsx)(ek,{banner:t[1],disableLazyLoad:!0,imageClassName:"apsect-[5/2]"},t[1].id),";"]}):3===s?(0,i.jsxs)("div",{className:"flex flex-col gap-2 mt-5 mx-4",ref:n,children:[(0,i.jsx)(ek,{banner:t[0],disableLazyLoad:!0,imageClassName:"apsect-[5/2]"},t[0].id),(0,i.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,i.jsx)(ek,{banner:t[1],disableLazyLoad:!0,imageClassName:"h-[116px]"},t[1].id),(0,i.jsx)(ek,{banner:t[2],disableLazyLoad:!0,imageClassName:"h-[116px]"},t[2].id)]})]}):4===s?(0,i.jsxs)("div",{className:"flex flex-col gap-2 mt-5 mx-4",ref:n,children:[(0,i.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,i.jsx)(ek,{banner:t[0],disableLazyLoad:!0,imageClassName:"h-[116px]"},t[0].id),(0,i.jsx)(ek,{banner:t[1],disableLazyLoad:!0,imageClassName:"h-[116px]"},t[1].id)]}),(0,i.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,i.jsx)(ek,{banner:t[2],disableLazyLoad:!0,imageClassName:"h-[116px]"},t[2].id),(0,i.jsx)(ek,{banner:t[3],disableLazyLoad:!0,imageClassName:"h-[116px]"},t[3].id)]})]}):null}var eC=n(86671);function eP(e){var t=e.className,n=e.banner,s=e.disableLazyLoad,l=n||{},r=l.image,o=l.title,a=l.url,d=l.id,c=$({eventData:{bannerId:d}}),u=c.bannerViewRef,m=c.onBannerClick,p=(0,f.d)("block h-full w-full h-[180px]",t);return(0,i.jsx)(b.r,{to:a.url,onClick:function(){return m({bannerId:d})},target:"_blank",className:p,shouldHandleUrlAndOnClick:!0,children:(0,i.jsx)("div",{ref:u,className:"w-full bg-[rgba(0,0,0,0.04)] flex justify-center items-center rounded-md",children:(0,i.jsx)(j.E,{disableLazyLoad:s,alt:r.alt,title:o,src:r.url,objectFit:"cover",imageClassName:"h-full",className:"user-select-none z-1 top-0 w-full h-[180px]",rounded:8})})})}var eI=n(75633),eL=n.n(eI),eS=function(e,t,n){var s=Math.max(0,t-Math.floor(e/2)),i=s+e-1;return i>=n&&(s=Math.max(0,(i=n-1)-e+1)),{bullets:Array.from({length:i-s+1},function(e,t){return s+t}),start:s,end:i}};function eT(e){var t=e.total,n=void 0===t?0:t,s=e.current,l=void 0===s?0:s,r=eS(6,l-1,n),o=r.bullets,a=r.start,d=r.end,c=(0,f.d)("flex items-center justify-center py-1 px-1.5 absolute rounded-large",eL().MainHomeTopSlider__sliderPagination);return(0,i.jsx)("div",{className:c,children:o.map(function(e,t){return(0,i.jsx)("span",{className:(0,f.d)("rounded-full bg-white transition-all duration-200 opacity-30 ml-1",n<=6?"w-1.5 h-1.5":e===a&&a>0||e===d&&d<n-1?"w-1 h-1":"w-1.5 h-1.5",e+1===l&&"w-3 !opacity-100")},"carousel-indicator-".concat(t))})})}function eM(e){var t=e.slides,n=e.eventData,s=(0,y.useRef)(null),l=(0,B.Z)((0,y.useState)(!1),2),r=l[0],o=l[1],a=$({eventData:n}).widgetViewRef,d={rootClass:(0,f.d)("flex overflow-hidden relative mt-4",eL().MainHomeTopSlider),navigationContainer:(0,f.d)("absolute right-0 bottom-42 flex items-center z-1",{"opacity-0":!r,"00":r},eL().MainHomeTopSlider__navigator)};return(0,e_.k)(t)?(0,i.jsx)("div",{className:d.rootClass,onMouseEnter:function(){o(!0)},onMouseLeave:function(){o(!1)},ref:a,children:(0,i.jsx)(eC.i,{loop:!0,ref:s,slidesPerView:1.1,effect:"fade",centeredSlides:!0,spaceBetween:8,disableFreeModeOnDesktop:!0,autoplay:!0,navigationButtonClassName:{prev:"hidden hidden",next:"hidden hidden",disabled:"opacity-50 pointer-events-none"},onInit:function(e){e.navigation.update()},useCustomPagination:!0,PaginationComponent:eT,className:"relative w-full dk-main-slider",slides:t.map(function(e,t){var n=e||{},s=n.bannerDestinationWidgetId,l=n.id;return(0,i.jsx)("div",{className:(0,f.d)({"cursor-pointer":s}),onClick:s?function(){(0,I.X5)(s)}:void 0,children:(0,i.jsx)(eP,{disableLazyLoad:0===t,banner:e},l||t)})})})}):null}var eR=n(71338),eE=n(98936),eO=n(80803),eD=n(40565),ez=n(87049),eZ=n(8108),eB=n(43287),eA=n(94042),eF=n(80786),eV=n(45969),eH=n(48781);function eU(e){var t=e.className,n=e.hide,s=e.forDesktop,l=void 0!==s&&s,r=(0,J.R)({modalId:"supermarkets"}),o=r.isOpen,a=r.onClose,d=r.onOpen,c=(0,B.Z)((0,y.useState)(!1),2),u=c[0],m=c[1],p=(0,ez.v)(eF.b.isPendingInit),x=(0,y.useRef)(null);(0,eD.x)([{event:eA.JW,handler:function(e){return m(e)}}]);var h=function(){(0,eZ.N)({name:"widget_click",body:{version:2,page_type:(0,eB.C)(),widget_name:"supermarket_touchpoint",clicked_item_name:"fav_icon"}}),d()};(0,y.useEffect)(function(){if(l&&x.current&&(0,ec.d)(ea.X.FRESH_TOUCHPOINTS)){var e=function(){window.scrollY<624.5?x.current.style.width="0px":x.current.style.width="142px"};return e(),window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}},[l,p]);var v=(0,ec.d)(ea.X.SUPER_APP_WEB_PILLARS_VIEW);if(!(0,ec.d)(ea.X.FRESH_TOUCHPOINTS)||v)return null;var j=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eH.X,{shouldCloseOnPageChange:!1,isOpen:o,onDismiss:a}),(0,ec.d)(ea.X.LOCATION_BASED_BANNERS)?null:(0,i.jsx)(eV.c,{})]});return l?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{onClick:h,className:(0,f.d)("rounded-3xl text-subtitle-strong flex items-center bg-fresh-700 z-4 text-white cursor-pointer","w-max fixed px-3 py-2.5 transition-all duration-300 left-4 bottom-8",t),children:["سوپرمارکت",(0,i.jsxs)("div",{className:"flex items-center overflow-hidden whitespace-nowrap transition-all duration-300",ref:x,children:[(0,i.jsx)("div",{className:"w-[1px] h-4 mx-2 bg-[rgba(255,255,255,0.22)]"}),"تنوع بالا و پرتخفیف"]}),(0,i.jsx)(g.J,{icon:"cube-badge-fresh",color:"white",size:28,className:"mr-2"})]}),j]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{onClick:h,className:(0,f.d)("rounded-3xl text-h5 flex items-center bg-fresh-700 z-2 text-white select-none","w-max fixed px-2 py-1.5 transition-all duration-500 right-0 left-0 mx-auto bottom-0",t),style:{transform:"translateY(".concat(n?0:u?-140:-65,"px)")},children:[(0,i.jsx)(g.J,{icon:"cube-badge-fresh",color:"white",size:20}),(0,i.jsx)("div",{className:"w-[1px] h-4 mx-2 bg-[rgba(255,255,255,0.22)]"}),"سوپرمارکت، تنوع بالا، پرتخفیف"]}),j]})}var eJ=n(97234),eW=n(76020),eX=n(57079),eq=n(38875),eG=n(90263);function eY(e){var t=e.isOpen,n=e.onDismiss,s=e.shouldCloseOnPageChange,l=(0,ez.v)(eJ.Jw.supermarketServices),r=(0,y.useMemo)(function(){return l.map(function(e){return{title:({fresh:"پرتخفیف و متنوع",jet:"ارسال فوری‍"})[e.serviceName],image:({fresh:"/statics/img/png/fresh-shop-basket.png",jet:"/statics/img/png/jet-shop-basket.png"})[e.serviceName],backgroundColor:({fresh:"#DBF3E6",jet:"#FEEBDE"})[e.serviceName],badgeColor:({fresh:"var(--color-fresh-700)",jet:"#FF8042"})[e.serviceName],badgeTitle:({fresh:"ارسال امروز",jet:"۴۵ دقیقه‌ای"})[e.serviceName],icon:({fresh:"cube-shipping-fast",jet:"cube-action-time"})[e.serviceName],service:e}})},[l]),o=(0,B.Z)((0,y.useState)(null),2),a=o[0],d=o[1],c=(0,B.Z)((0,y.useState)(null),2),u=c[0],m=c[1],p=(0,x.C)().isDesktop,f=function(e){var t=e.service,n=e.title;return function(){if((0,eZ.N)({name:"widget_click",body:{version:2,page_type:(0,eB.C)(),widget_name:"supermarket_".concat(t.serviceName,"_touchpoint"),clicked_item_name:n}}),p||eX.b.hasSeen(t.serviceName)&&eG.j.hasSeen(t.serviceName)){window.location.href=t.action;return}eX.b.hasSeen(t.serviceName)?(eG.j.markAsSeen(t.serviceName),d(t)):(eX.b.markAsSeen(t.serviceName),m(t))}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Q.Modal,{headerTitle:(0,i.jsx)("div",{children:(0,i.jsx)("h5",{className:"text-h5 text-neutral-700",children:"یکی از سوپرمارکت‌های زیر را انتخاب کنید"})}),childrenClassName:"pb-5 xs:px-2 sm:px-5",hasCloseIcon:p,headerHideBottomBorder:!0,isOpen:t,onDismiss:n,shouldCloseOnPageChange:s,children:(0,i.jsx)("div",{className:"flex items-center justify-center xs:gap-3 sm:gap-3",children:r.map(function(e,t){var n=e.service,s=e.title,l=e.icon,r=e.backgroundColor,o=e.badgeColor,a=e.badgeTitle,d=e.image;return(0,i.jsxs)("div",{onClick:f({service:n,title:s}),className:"rounded py-3 flex-1 flex justify-center gap-2 flex-col cursor-pointer xs:h-[228px] lg:h-[250px]",style:{backgroundColor:r},children:[(0,i.jsxs)("div",{className:"flex items-center justify-start gap-1 xs:px-3 sm:px-4",children:[(0,i.jsx)("span",{className:"text-h5 text-neutral-900",children:s}),(0,i.jsx)(g.J,{icon:"cube-nav-chevron-left",color:"black",size:20})]}),(0,i.jsx)("div",{className:"xs:px-3 sm:px-4",children:(0,i.jsxs)("div",{style:{backgroundColor:o},className:"rounded-l-2xl rounded-tr-sm rounded-br-2xl flex justify-center items-center gap-2 w-fit px-3",children:[(0,i.jsx)(g.J,{icon:l,color:"white",size:16}),(0,i.jsx)("p",{className:"text-body2-strong text-icon-white",children:a})]})}),(0,i.jsx)(j.E,{className:"w-full mr-auto mt-auto",src:d,width:130,height:130,loading:"lazy",alt:n.serviceName})]})})})}),(0,i.jsx)(eW.N,{service:u,isOpen:Boolean(u)}),a&&(0,i.jsx)(eq.n,{isOpen:Boolean(a),service:a})]})}function e$(e){e.badge,e.defaultVariantId;var t=e.id,n=e.image,s=e.price,l=e.title,r=e.onClick;return(0,i.jsxs)(b.r,{target:"_blank",shouldHandleUrlAndOnClick:!0,to:(0,p.H1)({productId:t}),onClick:r,className:(0,f.d)("min-w-[140px] border-complete !border-neutral-200 rounded-md overflow-hidden","flex flex-col justify-between"),children:[(0,i.jsx)("div",{className:"bg-neutral-100",children:(0,i.jsx)(j.E,{width:140,height:140,src:n.url,alt:n.alt||l,style:{mixBlendMode:"multiply"}})}),(0,i.jsxs)("div",{className:"h-full p-2 !pt-1 flex flex-col gap-1 w-full justify-between items-start",children:[(0,i.jsx)("p",{className:"text-body2-strong-180 text-icon-high-emphasis h-10 w-full ellipsis-2",children:l}),(0,i.jsx)(el.t,{className:(0,f.d)("flex flex-col",{"!justify-start !items-start pt-0.5":s.discountPercent,"!flex-row !justify-start !items-center":!s.discountPercent}),price:s.rrpPrice,sellingPrice:s.sellingPrice,discount:s.discountPercent,productDiscountPercent:s.discountPercent,discountOnTop:!0,payablePriceTextClassName:"text-neutral-800 ml-1 text-h4",priceTextClassName:(0,f.d)({"line-through":s.discountPercent,"text-body-2":s.discountPercent,"text-h4":!s.discountPercent,"ml-1":!s.discountPercent,"text-neutral-300":s.discountPercent,"text-neutral-800":!s.discountPercent,"!leading-[24px]":!s.discountPercent}),compactPrice:!0})]})]},t)}function eQ(e){var t=e.description,n=e.icon,s=e.title,l=e.url,r=e.onSeeAllClick;return(0,i.jsxs)("div",{className:"mt-5 mx-4 mb-3 flex flex-col gap-0.5",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[n&&(0,i.jsx)(g.J,{icon:n,className:"ml-1.5",size:24}),(0,i.jsx)("h5",{className:"text-h5-180 text-neutral-900 flex-1",children:s}),l&&(0,i.jsxs)(b.r,{to:l,className:"flex justify-center items-center gap-1.5",target:"_blank",onClick:r,children:[(0,i.jsx)("p",{className:"text-neutral-700 text-body1-strong",children:"مشاهده همه"}),(0,i.jsx)(g.J,{icon:"chevronLeft",className:"-mr-1.5",size:20})]})]}),t&&(0,i.jsx)("p",{className:"text-body-1-180 text-neutral-600",children:t})]})}function eK(e){var t,n,l,r,o=e.data,a=e.utm,d=e.eventData,c=(o||{}).products,u=$({eventData:(0,W.Z)((0,s.Z)({},d),{products:c,bigDataCarouselName:a,carouselTitle:null==o?void 0:o.title,url:ei.s?null:null==window?void 0:null===(t=window.location)||void 0===t?void 0:t.pathname}),utm:a}),m=u.widgetViewRef,p=u.onWidgetClick,x=u.carouselViewRef,f=u.onCarouselClick,h=(0,y.useCallback)(function(e){e&&(m.current=e,x.current=e)},[m,x]),v=function(){var e;p({itemName:"مشاهده همه"}),f({products:c,url:ei.s?null:null==window?void 0:null===(e=window.location)||void 0===e?void 0:e.pathname})},j=function(e){var t=e.productItem;return function(){var e;p({itemName:t.title}),f({products:c,productId:t.id,url:ei.s?null:null==window?void 0:null===(e=window.location)||void 0===e?void 0:e.pathname})}},w=(c||[]).map(function(e){return(0,i.jsx)(e$,(0,W.Z)((0,s.Z)({},e),{onClick:j({productItem:e})}))});return(null==o?void 0:null===(n=o.seeMore)||void 0===n?void 0:n.url)&&w.push((0,i.jsx)(b.r,{target:"_blank",shouldHandleUrlAndOnClick:!0,to:o.seeMore.url,onClick:v,className:"min-w-[140px] overflow-hidden",children:(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center h-full",children:[(0,i.jsx)("div",{className:"rounded-circle p-2 border-2 border-icon-high-emphasis border-solid",children:(0,i.jsx)(g.J,{icon:"arrowLeft",size:20})}),(0,i.jsx)("p",{className:"text-neutral-700 mt-3 text-body1-strong",children:"مشاهده همه"})]})})),(0,i.jsxs)("div",{ref:h,children:[(0,i.jsx)(eQ,{description:null==o?void 0:o.description,icon:null==o?void 0:null===(l=o.icon)||void 0===l?void 0:l.url,title:null==o?void 0:o.title,url:null==o?void 0:null===(r=o.seeMore)||void 0===r?void 0:r.url,onSeeAllClick:v}),(0,i.jsx)(T.l,{items:[(0,i.jsx)("div",{className:"pr-2"})].concat((0,S.Z)(w),[(0,i.jsx)("div",{className:"pr-2"})]),className:"gap-2 w-full",sliderProps:{slidesOffsetAfter:0,slidesOffsetBefore:0}})]})}function e0(e){var t=e.image,n=e.title,s=e.url,l=e.onClick;return(0,i.jsxs)(b.r,{to:s.url||"",target:"_blank",shouldHandleUrlAndOnClick:!0,className:"w-[90px] h-[124px] border-complete !border-neutral-200 rounded-md overflow-hidden flex flex-col items-center gap-1.5",onClick:l,children:[(0,i.jsx)("div",{className:"bg-neutral-100 p-1.5",children:(0,i.jsx)(j.E,{width:78,height:78,src:t.url,alt:t.alt||n,style:{mixBlendMode:"multiply"}})}),(0,i.jsx)("h4",{className:"w-full text-center align-middle text-icon-high-emphasis text-body2-strong-180 ellipsis-1 px-2",children:n})]})}function e1(e){var t=e.data,n=(e.utm,e.eventData),l=t.description,r=t.icon,o=t.items,a=t.title,d=$({eventData:(0,W.Z)((0,s.Z)({},n),{items:o})}),c=d.widgetViewRef,u=d.onWidgetClick,m=function(e){var t=e.item;return function(){u({itemName:t.title})}},p=(o||[]).map(function(e,t){return(0,i.jsx)("div",{children:(0,i.jsx)(e0,(0,W.Z)((0,s.Z)({},e),{onClick:m({item:e})}))},t)});return(0,i.jsxs)("div",{ref:c,children:[(0,i.jsx)(eQ,{icon:(null==r?void 0:r.url)||"",title:a,description:l||""}),(0,i.jsx)(T.l,{items:[(0,i.jsx)("div",{className:"pr-2"},"pad-left")].concat((0,S.Z)(p),[(0,i.jsx)("div",{className:"pr-2"},"pad-right")]),className:"gap-2 w-full",sliderProps:{slidesOffsetAfter:0,slidesOffsetBefore:0}})]})}function e2(e){var t=e.image,n=e.title,s=e.url,l=e.onClick;return(0,i.jsxs)(b.r,{to:s.url||"",target:"_blank",shouldHandleUrlAndOnClick:!0,className:"min-w-[259px] border-complete !border-neutral-200 rounded-md overflow-hidden flex flex-col gap-2 pb-3",onClick:l,children:[(0,i.jsx)(j.E,{objectFit:"cover",src:t.url,alt:t.alt,width:259,height:145}),(0,i.jsx)("h4",{className:"text-neutral-650 text-body-1-180 ellipsis-2 px-3",children:n})]})}function e5(e){var t=e.data,n=e.utm,l=$({eventData:e.eventData,utm:n}),r=l.widgetViewRef,o=l.onWidgetClick,a=t.description,d=t.icon,c=t.news,u=t.seeMore,m=t.title,p=function(e){var t=e.magItem;return function(){o({itemName:t.title})}},x=(c||[]).map(function(e){return(0,i.jsx)(e2,(0,W.Z)((0,s.Z)({},e),{onClick:p({magItem:e})}))});return(0,i.jsxs)("div",{ref:r,children:[(0,i.jsx)(eQ,{description:a,icon:(null==d?void 0:d.url)||"",title:m,url:(null==u?void 0:u.url)||"",onSeeAllClick:function(){o({itemName:"مشاهده همه"})}}),(0,i.jsx)(T.l,{items:[(0,i.jsx)("div",{className:"pr-2"})].concat((0,S.Z)(x),[(0,i.jsx)("div",{className:"pr-2"})]),className:"gap-2 w-full",sliderProps:{slidesOffsetAfter:0,slidesOffsetBefore:0}})]})}eK.getPlaceholder=v("336px"),e1.getPlaceholder=v("149px"),e5.getPlaceholder=v("289px");var e3=n(98544),e4=n(59615),e6=n(84941),e7=n(25143);function e8(e){var t,n,s=e.data||{},i=s.lives,l=s.posts;return{lives:(null==i?void 0:null===(t=i.map)||void 0===t?void 0:t.call(i,function(e){return(0,e6.A)({data:e})}))||[],posts:(null==l?void 0:null===(n=l.map)||void 0===n?void 0:n.call(l,function(e){return(0,e7.E)({data:e})}))||[]}}var e9=n(16330),te=n(32614),tt=n(27314),tn=n(73066),ts=n(62075),ti=n(25233),tl=n.n(ti);function tr(e){var t,n,s,l,r=e.isLiveItem,o=e.live,a=e.video,d=e.videoOnClick,c=e.className,u=e.itemIndex,m=e.isInPromotion,x=void 0!==m&&m,h=(0,tt.e)().redirect,v=!1;r&&o?(t=o.dkLiveCover,n=o.dkLiveTitle,v=o.dkLiveStatus===tn.j.STARTED):a&&(t=a.postCircleCover,n=a.postTitle);var g=(0,y.useRef)(null),b=(0,te.o)({textRef:g,updateDependencies:[n]}).lineCount>2,w=(0,f.d)(tl().container,"rounded-circle shrink-0 w-full aspect-square relative flex items-center justify-center",(0,U.Z)({},tl().container__nowroz,x)),N=(0,f.d)("rounded-circle overflow-hidden bg-white aspect-square flex items-center justify-center",tl().innerContainer),_=(0,f.d)("rounded-circle overflow-hidden flex items-center justify-center",tl().image,(s={},(0,U.Z)(s,tl().image__nowroz,x),(0,U.Z)(s,tl()["image--live"],r&&v),s)),k=(0,f.d)(tl().timeBadge,(l={},(0,U.Z)(l,tl().timeBadge__nowroz,x),(0,U.Z)(l,tl().timeBadge__started,v),(0,U.Z)(l,tl().timeBadge__started__nowroz,x&&v),l),"absolute left-0 right-0 bottom-0 border-solid border-2 border-white w-max mx-auto px-1.5 rounded-md text-caption-strong");return(0,i.jsxs)("div",{onClick:function(){var e,t;r&&o?((0,ts.$G)({liveId:o.dkLiveId,liveOwnerId:null===(e=o.dkLiveUser)||void 0===e?void 0:e.id,placeIndex:u}),h({url:(0,p.$A)(o.dkLiveSlug)})):a&&((0,ts.OR)({postId:a.postId,postAuthorId:null===(t=a.postAuthor)||void 0===t?void 0:t.authorId,placeIndex:u}),null==d||d())},className:(0,f.d)(c,"w-[64px] shrink-0 cursor-pointer"),children:[(0,i.jsxs)("div",{className:w,children:[(0,i.jsx)("div",{className:N,children:(0,i.jsx)(j.E,{rounded:99999,objectFit:"cover",image:t,className:_})}),r&&(null==o?void 0:o.dkLiveBadgeText)&&(0,i.jsx)("div",{className:k,children:(0,P.U)(o.dkLiveBadgeText)})]}),(0,i.jsx)(e9.u,{label:n,position:"right-end",hasTooltip:b,children:(0,i.jsx)("div",{ref:g,className:(0,f.d)("mt-2 text-caption-180 text-center text-neutral-850",{"ellipsis-2":b}),children:n})})]})}var to=(0,d.q)({url:"/magnet/home-page/reactions/",transformer:function(e){var t=e.data;return{reactions:Object.keys(t||{}).reduce(function(e,n){var i=t[n]||{},l=i.is_author_followed,r=i.is_post_liked;return(0,W.Z)((0,s.Z)({},e),(0,U.Z)({},n,{isAuthorFollowed:l,isPostLiked:r}))},{})}}}),ta=n(42729);function td(e){var t,n,l,c,u,m,p,x,h,v,g,j,b,w,N,_,k,C,P,I,L,M=e.data.endpoint,R=(e.utm,e.eventData),E=(0,r.V)({apiMethod:(0,d.q)({url:M||"/v1/magnet/home-page/",transformer:e8,baseURL:function(){return a.V.API_BASE_URL.replace("/v1","")}})}).data||{},O=E.lives,D=E.posts,z=$({eventData:R}),Z=z.onWidgetClick,A=z.widgetViewRef,F=(n=(t=(0,J.R)({modalId:ta.f.VIDEO})).isOpen,l=t.onOpen,c=t.onClose,m=(u=(0,B.Z)((0,y.useState)(-1),2))[0],p=u[1],x=n&&-1!==m,v=(h=(0,eO.d)()).isOpen,g=h.onOpen,j=h.onClose,b=((0,r.V)({apiMethod:to,disabled:!x}).data||{}).reactions,N=(w=(0,B.Z)((0,y.useState)(b),2))[0],_=w[1],(0,y.useEffect)(function(){_(b)},[b]),C=((k=null==D?void 0:D[m])||{}).postId,P=x&&N&&N[C],{isOpenVideoModal:x,isOpenVideoEndedModal:v,activePost:k,activePostReaction:P,hasPreviousPost:I=0!==m,hasNextPost:L=!(0,o.x)(D)&&m!==D.length-1,handleClickVideoItem:function(e){return function(){p(e),l()}},handleCloseModal:function(){p(-1),c()},handleToNextPost:function(){return p(function(e){return L?e+1:e})},handleToPreviousPost:function(){return p(function(e){return I?e-1:e})},handleOnVideoEnded:function(){L||g()},toPostWithIndex:function(e){return p(e)},onCloseVideoEndedModal:j,handleUpdateActivePostIsLiked:function(e){P&&_((0,W.Z)((0,s.Z)({},N),(0,U.Z)({},C,(0,W.Z)((0,s.Z)({},P),{isPostLiked:e}))))},handleUpdateActivePostIsAuthorFollowed:function(e){P&&_((0,W.Z)((0,s.Z)({},N),(0,U.Z)({},C,(0,W.Z)((0,s.Z)({},P),{isAuthorFollowed:e}))))}}),V=F.isOpenVideoModal,H=F.isOpenVideoEndedModal,X=F.activePost,q=F.activePostReaction,G=F.hasPreviousPost,Y=F.hasNextPost,Q=F.handleClickVideoItem,K=F.handleCloseModal,ee=F.handleToNextPost,et=F.handleToPreviousPost,en=F.handleOnVideoEnded,es=F.toPostWithIndex,el=F.onCloseVideoEndedModal,er=F.handleUpdateActivePostIsLiked,eo=F.handleUpdateActivePostIsAuthorFollowed;if((0,o.x)(O)&&(0,o.x)(D)||ei.s)return(0,i.jsx)("div",{className:"h-[128px]"});var ea=(null==O?void 0:O.map(function(e,t){return(0,i.jsx)(tr,{className:(0,f.d)("ml-3 lg:ml-0",{"mr-2":0===t}),isLiveItem:!0,live:e,itemIndex:t},e.dkLiveId)}))||[],ed=(null==D?void 0:D.map(function(e,t){return(0,i.jsx)(tr,{className:(0,f.d)("ml-3 lg:ml-0",{"mr-2":0===t&&(0,o.x)(O)}),video:e,videoOnClick:Q(t),itemIndex:t},e.postId)}))||[];return(0,i.jsxs)("div",{onClick:function(){return Z()},ref:A,children:[(0,i.jsx)(T.l,{sliderProps:{freeMode:!1,disableFreeModeOnDesktop:!0},className:"pt-4",spaceBetween:24,items:(0,S.Z)(ea).concat((0,S.Z)(ed))}),(0,i.jsx)(e3.D,{posts:D,isOpen:H,onClose:el,toPostWithIndex:es}),V&&X&&(0,i.jsx)(e4.K,{toNextPost:ee,toPreviousPost:et,hasNextPost:Y,hasPreviousPost:G,post:X,postReaction:q,isOpen:V,onClose:K,onVideoEnded:en,updateLikeReaction:er,updateAuthorFollowedReaction:eo})]})}td.getPlaceholder=v("128px");var tc=n(12794),tu=n.n(tc);function tm(e){var t=e.index,n=e.product,s=e.columnIndex,l=e.columnLength,r=e.onClick,o=n.id,a=n.title,d=n.image,c=(0,P.U)(s*l+t+1);return(0,i.jsx)("div",{className:"border-complete-200 rounded mb-2 pl-3",children:(0,i.jsx)(b.r,{to:(0,p.H1)({productId:o}),shouldHandleUrlAndOnClick:!0,onClick:r,children:(0,i.jsxs)("div",{className:(0,f.d)("flex",tu().ProductItem),children:[(0,i.jsx)("div",{className:"bg-neutral-100 ml-3 rounded",children:(0,i.jsx)(j.E,{width:72,height:72,src:d.url,alt:d.alt||a,className:"rounded shrink-0 mix-blend-multiply overflow-hidden"})}),(0,i.jsx)("div",{className:(0,f.d)("grow flex flex-col justify-center relative",tu().ProductItem__description),children:(0,i.jsxs)("p",{className:"text-body-2 text-neutral-700 ellipsis-2 overflow-hidden flex justify-start flex-row items-center",children:[(0,i.jsx)("span",{className:"rounded-full text-h5-extra inline-flex justify-center items-center w-5.5 h-5.5 text-white bg-primary-500 ml-2",children:c}),(0,i.jsx)("span",{children:a})]})})]})})})}function tp(e){var t,n,l=e.data,r=e.utm,a=e.eventData,d=l.description,c=l.icon,u=l.products,m=l.title,p=$({eventData:(0,W.Z)((0,s.Z)({},a),{products:u,bigDataCarouselName:r,carouselTitle:m,url:ei.s?null:null==window?void 0:null===(t=window.location)||void 0===t?void 0:t.pathname}),utm:r}),x=p.widgetViewRef,h=p.onWidgetClick,v=p.carouselViewRef,g=p.onCarouselClick,j=(0,y.useCallback)(function(e){e&&(x.current=e,v.current=e)},[x,v]),b=function(e){var t=e.productItem;return function(){var e;h({itemName:t.title}),g({products:u,productId:t.id,url:ei.s?null:null==window?void 0:null===(e=window.location)||void 0===e?void 0:e.pathname})}},w=u?Array.from({length:Math.floor(u.length/3)},function(e,t){return[u[3*t],u[3*t+1],u[3*t+2]]}):[],N=(0,f.d)("w-full flex flex-col justify-center align-items bg-neutral-000 lg:rounded-large lg:border-complete-200");if((0,o.x)(u))return null;var _=null==w?void 0:null===(n=w.map)||void 0===n?void 0:n.call(w,function(e,t){var n;return(0,i.jsx)("div",{children:null==e?void 0:null===(n=e.map)||void 0===n?void 0:n.call(e,function(n,s){var l=(n||{}).id;return(0,i.jsx)(tm,{index:s,onClick:b({productItem:n}),product:n,columnIndex:t,columnLength:null==e?void 0:e.length},l)})})});return(0,i.jsxs)("div",{className:N,ref:j,children:[(0,i.jsx)(eQ,{description:d,icon:c.url,title:m}),(0,i.jsx)("div",{className:"flex overflow-x-auto overflow-y-hidden hide-scrollbar",children:(0,i.jsx)(eC.i,{slides:_,spaceBetween:8,slidesOffsetBefore:16,slidesOffsetAfter:16,slidesPerView:1.5,className:"flex-1 w-full"})})]})}tp.getPlaceholder=v("344px");var tx=n(5632),tf=n(98050),th=n(46621),tv=n.n(th),tg=n(45227),tj=n(32097),tb=n(51382),tw=n(12571);function tN(e){return(0,i.jsx)(tf.H,(0,W.Z)((0,s.Z)({},e),{productHasQuickView:!1}))}function t_(e){var t=e.data,n=(0,tx.useRouter)(),l=(0,tj.N)(n.asPath)[tg.Tx.SEARCH_TAB]||tb.g;return(0,i.jsx)("article",{className:tv().ProductList__item,children:l===tw.I.FRESH?(0,i.jsx)(tN,(0,s.Z)({},t)):(0,i.jsx)(tf.H,(0,s.Z)({},t))})}function tk(e){var t=e.banner,n=e.className,s=e.imageClassName,l=e.disableLazyLoad,r=t||{},o=r.image,a=r.title,d=r.url,c=r.id,u=$({eventData:{bannerId:c}}),m=u.bannerViewRef,p=u.onBannerClick,x=(0,f.d)("block h-full w-full",n),h=(0,f.d)(s,"border border-solid border-[#0C0C0C12]");return(0,i.jsx)(b.r,{to:(null==d?void 0:d.url)||"",onClick:function(){return p({bannerId:c})},shouldHandleUrlAndOnClick:!0,target:"_blank",className:x,children:(0,i.jsx)("div",{ref:m,className:"w-full bg-[rgba(0,0,0,0.04)] flex justify-center items-center rounded-md",children:(0,i.jsx)(j.E,{disableLazyLoad:l,alt:o.alt,title:a,src:o.url,objectFit:"cover",imageClassName:h,className:"user-select-none z-1 top-0 w-full h-full",rounded:8})})})}function ty(e){var t=e.banners,n=$({eventData:e.eventData}).widgetViewRef,s=t.length;return 0===s?null:1===s?(0,i.jsx)("div",{className:"mt-5 mx-4",ref:n,children:(0,i.jsx)(tk,{banner:t[0],disableLazyLoad:!0,imageClassName:"aspect-[5/2]"},t[0].id)}):2===s?(0,i.jsxs)("div",{className:"flex flex-col gap-2 mt-5 mx-4",ref:n,children:[(0,i.jsx)(tk,{banner:t[0],disableLazyLoad:!0,imageClassName:"aspect-[5/2]"},t[0].id),(0,i.jsx)(tk,{banner:t[1],disableLazyLoad:!0,imageClassName:"aspect-[5/2]"},t[1].id),";"]}):3===s?(0,i.jsxs)("div",{className:"flex flex-col gap-2 mt-5 mx-4",ref:n,children:[(0,i.jsx)(tk,{banner:t[0],disableLazyLoad:!0,imageClassName:"aspect-[5/2]"},t[0].id),(0,i.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,i.jsx)(tk,{banner:t[1],disableLazyLoad:!0,imageClassName:"h-[116px]"},t[1].id),(0,i.jsx)(tk,{banner:t[2],disableLazyLoad:!0,imageClassName:"h-[116px]"},t[2].id)]})]}):4===s?(0,i.jsxs)("div",{className:"flex flex-col gap-2 mt-5 mx-4",ref:n,children:[(0,i.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,i.jsx)(tk,{banner:t[0],disableLazyLoad:!0,imageClassName:"h-[116px]"},t[0].id),(0,i.jsx)(tk,{banner:t[1],disableLazyLoad:!0,imageClassName:"h-[116px]"},t[1].id)]}),(0,i.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,i.jsx)(tk,{banner:t[2],disableLazyLoad:!0,imageClassName:"h-[116px]"},t[2].id),(0,i.jsx)(tk,{banner:t[3],disableLazyLoad:!0,imageClassName:"h-[116px]"},t[3].id)]})]}):null}function tC(e){var t=e.className,n=e.banner,s=e.disableLazyLoad,l=n||{},r=l.image,o=l.title,a=l.url,d=l.id,c=$({eventData:{bannerId:d}}),u=c.bannerViewRef,m=c.onBannerClick,p=(0,f.d)("block h-full w-full h-[180px]",t);return(0,i.jsx)(b.r,{to:(null==a?void 0:a.url)||"",target:"_blank",className:p,shouldHandleUrlAndOnClick:!0,onClick:function(){return m({bannerId:d})},children:(0,i.jsx)("div",{ref:u,className:"w-full bg-[rgba(0,0,0,0.04)] flex justify-center items-center rounded-md",children:(0,i.jsx)(j.E,{disableLazyLoad:s,alt:r.alt,title:o,src:r.url,objectFit:"cover",imageClassName:"h-full",className:"user-select-none z-1 top-0 w-full h-[180px]",rounded:8})})})}t_.getPlaceholder=v("300px");var tP=n(48447),tI=n.n(tP),tL=function(e,t,n){var s=Math.max(0,t-Math.floor(e/2)),i=s+e-1;return i>=n&&(s=Math.max(0,(i=n-1)-e+1)),{bullets:Array.from({length:i-s+1},function(e,t){return s+t}),start:s,end:i}};function tS(e){var t=e.total,n=void 0===t?0:t,s=e.current,l=void 0===s?0:s,r=tL(6,l-1,n),o=r.bullets,a=r.start,d=r.end,c=(0,f.d)("flex items-center justify-center py-1 px-1.5 absolute rounded-large",tI().MainHomeTopSlider__sliderPagination);return(0,i.jsx)("div",{className:c,children:o.map(function(e,t){return(0,i.jsx)("span",{className:(0,f.d)("rounded-full bg-white transition-all duration-200 opacity-30 ml-1",n<=6?"w-1.5 h-1.5":e===a&&a>0||e===d&&d<n-1?"w-1 h-1":"w-1.5 h-1.5",e+1===l&&"w-3 !opacity-100")},"carousel-indicator-".concat(t))})})}function tT(e){var t=e.slides,n=e.eventData,s=(0,y.useRef)(null),l=(0,B.Z)((0,y.useState)(!1),2),r=l[0],o=l[1],a=$({eventData:n}).widgetViewRef,d={rootClass:(0,f.d)("flex overflow-hidden relative mt-4",tI().MainHomeTopSlider),navigationContainer:(0,f.d)("absolute right-0 bottom-42 flex items-center z-1",{"opacity-0":!r,"00":r},tI().MainHomeTopSlider__navigator)};return(0,e_.k)(t)?(0,i.jsx)("div",{className:d.rootClass,onMouseEnter:function(){o(!0)},onMouseLeave:function(){o(!1)},ref:a,children:(0,i.jsx)(eC.i,{loop:!0,ref:s,slidesPerView:1.1,effect:"fade",centeredSlides:!0,spaceBetween:8,disableFreeModeOnDesktop:!0,autoplay:!0,navigationButtonClassName:{prev:"hidden hidden",next:"hidden hidden",disabled:"opacity-50 pointer-events-none"},onInit:function(e){e.navigation.update()},useCustomPagination:!0,PaginationComponent:tS,className:"relative w-full dk-main-slider",slides:t.map(function(e,t){var n=null!=e?e:{},s=n.bannerDestinationWidgetId,l=n.id;return(0,i.jsx)("div",{className:(0,f.d)({"cursor-pointer":s}),onClick:s?function(){(0,I.X5)(s)}:void 0,children:(0,i.jsx)(tC,{disableLazyLoad:0===t,banner:e},l||t)})})})}):null}function tM(e){var t=e.image,n=e.link,s=e.title,l=e.onClick;return(0,i.jsxs)(b.r,{className:"flex flex-col items-center user-select-none w-full",to:n.url,onClick:l,children:[(0,i.jsx)(j.E,{className:"mb-1",src:t.url,width:72,height:72,alt:t.alt}),(0,i.jsx)("p",{className:"text-caption-180 text-neutral-900 ellipsis-2 text-center h-9",children:s})]})}function tR(e){var t=e.numberOfRows,n=e.categories,s=e.onItemClick,l=(0,y.useMemo)(function(){return(null==n?void 0:n.length)?Array.from({length:Math.ceil(n.length/t)},function(e,s){return n.slice(s*t,(s+1)*t)}):[]},[n,t]),r=(0,f.d)("w-full bg-neutral-000 flex-wrap gap-4","flex overflow-x-auto flex-nowrap overflow-y-hidden hide-scrollbar");return(0,i.jsxs)("div",{className:r,children:[(0,i.jsx)("div",{})," ",l.map(function(e,t){return(0,i.jsx)("div",{className:"flex flex-col items-center justify-between gap-3",children:e.map(function(e,t){return(0,i.jsx)(tM,{image:e.image,link:e.link,title:e.title,onClick:s?function(){return s(e.title)}:void 0},t)})},t)}),(0,i.jsx)("div",{})," "]})}var tE={dkms_banner:function(e){var t=e.data,n=e.eventData,s=t.items,l=t.showType;return(0,e_.k)(s)?"slider"===l?(0,i.jsx)(eM,{slides:s,eventData:n}):"banner"===l?(0,i.jsx)(ey,{banners:s,eventData:n}):null:null},simple_banner:function(e){var t=e.data,n=e.eventData,s=t.items,l=t.showType;return(0,e_.k)(s)?"slider"===l?(0,i.jsx)(tT,{slides:s,eventData:n}):"banner"===l?(0,i.jsx)(ty,{banners:s,eventData:n}):null:null},circle_badge:eN,fresh_touchpoint:function(e){var t=e.data,n=(e.utm,e.eventData),s=(0,eO.d)(),l=s.isOpen,r=s.onOpen,o=s.onClose,a=$({eventData:n}),d=a.onWidgetClick,c=a.widgetViewRef,u=(0,B.Z)((0,y.useState)(!0),2),m=u[0],p=u[1],x=(0,B.Z)((0,eE.R)({rootMargin:"-62px 0px 0px 0px"}),2),f=x[0],h=x[1];return((0,y.useEffect)(function(){p(h)},[h]),(0,ec.d)(ea.X.SUPER_APP_WEB_PILLARS_VIEW))?null:(0,i.jsxs)("div",{className:"mt-4 mx-4",ref:c,children:[(0,i.jsx)("div",{ref:f,onClick:function(){r(),d()},className:"rounded-md relative overflow-hidden cursor-pointer",children:(0,i.jsx)(j.E,{src:t.image.url,alt:t.image.alt,height:74.5,objectFit:"cover"})}),(0,i.jsx)(eY,{isOpen:l,onDismiss:o}),(0,i.jsx)(eU,{hide:m})]})},touchpoint_group:function(e){var t=e.data,n=e.utm,s=$({eventData:e.eventData,utm:n}),l=s.widgetViewRef,r=s.onWidgetClick,o=t.defaultGroups,a=o.title,d=o.numberOfRows,c={categories:o.items.map(function(e,t){return{id:t,image:e.image,title:e.title,link:e.link}})}.categories;return(0,i.jsxs)("div",{className:"w-full flex flex-col items-center",ref:l,children:[(0,i.jsx)("div",{className:"w-full",children:(0,i.jsx)(eQ,{title:a})}),(0,i.jsx)(tR,{numberOfRows:d,categories:c,onItemClick:function(e){r({itemName:e})}})]})},divider:function(e){var t=e.data.style;return(0,i.jsx)("hr",{style:t,className:"w-full bg-neutral-100 border-none h-2 mt-4"})},horizontal_products:eK,bnpl_credit:en,cart_based_products:eo,ordered_products:tp,mag:e5,image_carousel:e1,magnet_watch_buy:td,ads_video:H,emergency_communication:function(e){return(0,i.jsx)(eR.S,{className:"py-3 lg:py-6 px-4",clientPage:"home-page"})},vertical_product_listing:n(65765).C,product:t_};function tO(e){var t=e.widget,n=tE[t.type];return n?(0,i.jsx)(l.Z,{children:(0,i.jsx)(m,{widget:t,Component:n})}):null}function tD(e){var t=e.widget,n=tE[t.type];return n?"data"in t?(0,i.jsx)(n,(0,s.Z)({},t)):"url"in t?(0,i.jsx)(tO,{widget:t}):null:null}},73186:function(e){e.exports={right:"styles_right__bWd56",left:"styles_left__9JtiE"}},83679:function(e){e.exports={VideoEndedModal__item:"styles_VideoEndedModal__item__Wa_x7"}},34479:function(e){e.exports={VideoModalContentFooterOverlay:"styles_VideoModalContentFooterOverlay__Dr7La"}},57194:function(e){e.exports={VideoModalContentHeaderOverlay:"styles_VideoModalContentHeaderOverlay__BR_XF"}},90830:function(e){e.exports={VideoPlayerProgressbar__range:"styles_VideoPlayerProgressbar__range__whAT3"}},50069:function(e){e.exports={slider:"styles_slider__Yi2lt",productCard__image:"styles_productCard__image__Z4T2c",productCard__carouselImage:"styles_productCard__carouselImage__6_HS2",productCard__blendBackground:"styles_productCard__blendBackground__AdTH_",blurOverlay:"styles_blurOverlay__UGkGH",controlButton:"styles_controlButton__ExnC2",controlButtonTransparent:"styles_controlButtonTransparent__BurIf",progressBar:"styles_progressBar__mHKof"}},82276:function(e){e.exports={Bnpl__animation:"styles_Bnpl__animation__NDhdA",show:"styles_show__NNQAp",Bnpl__card:"styles_Bnpl__card__d0gZW","Bnpl__card--debt":"styles_Bnpl__card--debt__UI_7r"}},73585:function(e){e.exports={shortcutsModal__serviceBox:"styles_shortcutsModal__serviceBox__VUoTe"}},88238:function(e){e.exports={MainHomeDeepLinks__moreButton:"styles_MainHomeDeepLinks__moreButton__2S6fb"}},75633:function(e){e.exports={MainHomeTopSlider:"styles_MainHomeTopSlider__dXMAX",MainHomeTopSlider__navigator:"styles_MainHomeTopSlider__navigator__ystIx",MainHomeTopSlider__sliderPagination:"styles_MainHomeTopSlider__sliderPagination__K9AP_",MainHomeTopSlider__sliderPaginationBullet:"styles_MainHomeTopSlider__sliderPaginationBullet__EtcYh","MainHomeTopSlider__sliderPaginationBullet--active":"styles_MainHomeTopSlider__sliderPaginationBullet--active__fQpzn"}},25233:function(e){e.exports={container:"styles_container__MmSW7",container__nowroz:"styles_container__nowroz__tlc6l",innerContainer:"styles_innerContainer__HmNtt",image:"styles_image__tidrw",image__nowroz:"styles_image__nowroz__lV_Eh","image--live":"styles_image--live__MIehF",timeBadge:"styles_timeBadge__w3k31",timeBadge__nowroz:"styles_timeBadge__nowroz__aGxsg",timeBadge__started:"styles_timeBadge__started__JrLn6",timeBadge__started__nowroz:"styles_timeBadge__started__nowroz__NSKmn"}},12794:function(e){e.exports={ProductItem:"styles_ProductItem__Tk9Wv",ProductItem__description:"styles_ProductItem__description__8StpG"}},48447:function(e){e.exports={MainHomeTopSlider:"styles_MainHomeTopSlider___GwmC",MainHomeTopSlider__navigator:"styles_MainHomeTopSlider__navigator__uGyJu",MainHomeTopSlider__sliderPagination:"styles_MainHomeTopSlider__sliderPagination__2wftX",MainHomeTopSlider__sliderPaginationBullet:"styles_MainHomeTopSlider__sliderPaginationBullet__WCKZ_","MainHomeTopSlider__sliderPaginationBullet--active":"styles_MainHomeTopSlider__sliderPaginationBullet--active___M5em"}}}]);
